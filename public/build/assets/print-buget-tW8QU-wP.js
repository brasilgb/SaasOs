import{j as e,r as B}from"./app-DCKq3iYY.js";import{D,P as T,S,V as r,T as o,p as I}from"./react-pdf.browser-CTOpKgKM.js";import{B as C}from"./button-C1BBNDVX.js";import{c as P}from"./createLucideIcon-q2T83F1J.js";import{P as k}from"./printer-8oLpmT4U.js";import"./tslib.es6-M_FJ09fS.js";import"./index-8wtZ7S_H.js";import"./utils-CDN07tui.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],O=P("loader",N),h=l=>{const s=parseFloat(l);return isNaN(s)?"R$ 0,00":`R$ ${s.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")}`},t=S.create({page:{padding:30,fontFamily:"Helvetica",fontSize:10,lineHeight:1.5},headerSection:{marginBottom:20,paddingBottom:10,borderBottomWidth:1,borderBottomColor:"#333",borderBottomStyle:"solid",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},companyInfo:{width:"75%"},companyName:{fontSize:18,fontWeight:"bold",marginBottom:2,color:"#003366"},companyDetails:{fontSize:9,color:"#555"},logoPlaceholder:{width:"20%",height:50,backgroundColor:"#eee",justifyContent:"center",alignItems:"center",border:"1px solid #ccc"},budgetTitle:{fontSize:14,fontWeight:"bold",marginBottom:15,textAlign:"center",textDecoration:"underline",color:"#333"},sectionContainer:{marginBottom:15,padding:5,backgroundColor:"#f9f9f9",border:"1px solid #ddd",borderRadius:2},sectionTitle:{fontSize:12,fontWeight:"bold",marginBottom:8,color:"#333",paddingBottom:2,borderBottom:"1px solid #eee"},row:{flexDirection:"row",marginBottom:5,justifyContent:"space-between"},column:{width:"48%"},detailItem:{flexDirection:"row",justifyContent:"space-between",paddingVertical:2},label:{fontWeight:"bold",color:"#555"},value:{color:"#000"},obsBox:{marginTop:10,border:"1px solid #ccc",padding:8,minHeight:60},totalGeral:{fontSize:14,fontWeight:"bold",color:"#A50000",marginTop:10,paddingTop:5,borderTop:"1px solid #333",textAlign:"right"}}),z=({company:l,budget:s})=>{const{companyname:n,cnpj:i,city:d,number:a,street:c,district:m,telephone:x}=l,{service:y,description:p,estimated_time:j,part_value:u,labor_value:g,total_value:b,warranty:f,obs:v}=s,w=v||"Nenhuma observação informada.";return e.jsx(D,{children:e.jsxs(T,{size:"A4",style:t.page,children:[e.jsxs(r,{style:t.headerSection,fixed:!0,children:[e.jsxs(r,{style:t.companyInfo,children:[e.jsx(o,{style:t.companyName,children:n}),e.jsxs(o,{style:t.companyDetails,children:["CNPJ: ",i]}),e.jsxs(o,{style:t.companyDetails,children:["Tel: ",x]}),e.jsxs(o,{style:t.companyDetails,children:[c,", ",a," - ",m,", ",d]})]}),e.jsx(r,{style:t.logoPlaceholder,children:e.jsx(o,{style:{fontSize:8},children:"LOGO AQUI"})})]}),e.jsx(o,{style:t.budgetTitle,children:"DETALHES DO ORÇAMENTO DE SERVIÇO"}),e.jsxs(r,{style:t.sectionContainer,children:[e.jsx(o,{style:t.sectionTitle,children:"Serviço Orçado"}),e.jsxs(r,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Nome do Serviço:"}),e.jsx(o,{style:t.value,children:y})]}),e.jsxs(r,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Descrição:"}),e.jsx(o,{style:t.value,children:p})]}),e.jsxs(r,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Tempo Estimado:"}),e.jsx(o,{style:t.value,children:j})]})]}),e.jsxs(r,{style:t.sectionContainer,children:[e.jsx(o,{style:t.sectionTitle,children:"Valores e Condições"}),e.jsxs(r,{style:t.row,children:[e.jsxs(r,{style:t.column,children:[e.jsxs(r,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Valor Mão de Obra:"}),e.jsx(o,{style:t.value,children:h(g)})]}),e.jsxs(r,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Valor Peças:"}),e.jsx(o,{style:t.value,children:h(u)})]})]}),e.jsxs(r,{style:t.column,children:[e.jsxs(r,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Garantia:"}),e.jsx(o,{style:t.value,children:f})]}),e.jsxs(r,{style:[t.detailItem,t.totalGeral],children:[e.jsx(o,{children:"TOTAL GERAL:"}),e.jsx(o,{children:h(b)})]})]})]})]}),e.jsxs(r,{style:t.obsBox,children:[e.jsx(o,{style:{fontWeight:"bold",marginBottom:5},children:"Observações:"}),e.jsx(o,{children:w})]})]})})};function G({company:l,budget:s}){const[n,i]=B.useState(!1),d=async()=>{if(!l||!s){console.error("Dados de empresa ou orçamento ausentes.");return}i(!0);try{const c=await I(e.jsx(z,{company:l,budget:s})).toBlob(),m=URL.createObjectURL(c);window.open(m,"_blank")}catch(a){console.error("Erro ao gerar ou abrir o PDF:",a),alert("Houve um erro ao gerar o PDF. Tente novamente.")}finally{i(!1)}};return e.jsx("div",{className:"print-budget-container",children:e.jsxs(C,{onClick:d,disabled:n||!l||!s,title:!l||!s?"Dados do orçamento ausentes":"Visualizar Orçamento",children:[n?e.jsx(O,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(k,{className:"w-4 h-4 mr-2"}),"Gerar PDF"]})})}export{G as PrintBudget};
