import{u as A,r as m,j as e,C as G,S as H,b as P}from"./vendor-9cxgAHzg.js";import{B as R}from"./button-DFigV1aq.js";import{I as u}from"./input-D2aH1Wd-.js";import{L as d}from"./label-BRTi3l1J.js";import{I as a}from"./input-error-DjQthEM2.js";import{u as S,d as j,c as n}from"./mask-Dzd4Hpc-.js";import{w as _}from"./dataSelect-YUEq-QLc.js";import{t as C}from"./app-toast-messages-BBGi5OF3.js";import{s as N}from"./selectStyles-DGGAokdD.js";import"./utils-veIRhKZd.js";import"./index-C6x6Dy02.js";function se({initialData:r,budgets:t}){const h=!!r,w=t==null?void 0:t.map(s=>({value:s,label:s})),{data:o,setData:c,post:O,patch:E,processing:M,reset:k,errors:l}=A({category:(r==null?void 0:r.category)??"",service:(r==null?void 0:r.service)??"",model:(r==null?void 0:r.model)??"",description:(r==null?void 0:r.description)??"",estimated_time:(r==null?void 0:r.estimated_time)??"",part_value:(r==null?void 0:r.part_value)??"",labor_value:(r==null?void 0:r.labor_value)??"",total_value:(r==null?void 0:r.total_value)??"",warranty:(r==null?void 0:r.warranty)??"",validity:(r==null?void 0:r.validity)??"",obs:(r==null?void 0:r.obs)??""}),[y,I]=m.useState(w),W=y.find(s=>s.value===(r==null?void 0:r.category))??null,B=_.find(s=>s.value===(r==null?void 0:r.warranty))??null,[z,v]=m.useState(W),[F,b]=m.useState(B);m.useEffect(()=>{const s=Number(S(String(o.part_value)))||0,g=Number(S(String(o.labor_value)))||0,x=s+g;c(p=>({...p,part_value:j(p.part_value),labor_value:j(p.labor_value),total_value:j(String(x))}))},[o.part_value,o.labor_value]);const L=s=>{s.preventDefault(),h?E(route("app.budgets.update",r.id),{onSuccess:()=>{C("Sucesso","Orçamento atualizado com sucesso")}}):O(route("app.budgets.store"),{onSuccess:()=>{C("Sucesso","Orçamento criado com sucesso"),k(),v(null),b(null)}})},T=s=>{v(s),c("category",(s==null?void 0:s.value)??"")},V=s=>{const g={label:s,value:s};I(x=>[...x,g]),v(g),c("category",s)},$=s=>{b(s),c("warranty",(s==null?void 0:s.value)??"")},f="flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-ring";return e.jsxs("form",{onSubmit:L,className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Categoria do Orçamento"}),e.jsx(G,{value:z,options:y,onChange:T,onCreateOption:V,isClearable:!0,styles:N,placeholder:"Selecione ou digite a nova",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9"}),e.jsx(a,{message:l.category})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Serviço"}),e.jsx(u,{value:o.service,onChange:s=>c("service",s.target.value)}),e.jsx(a,{message:l.service})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Modelo"}),e.jsx(u,{value:o.model,onChange:s=>c("model",s.target.value)})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Valor Peças"}),e.jsx(u,{value:n(o.part_value),onChange:s=>c("part_value",s.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Tempo Estimado do Serviço (Hs)"}),e.jsx(u,{value:o.estimated_time,onChange:s=>c("estimated_time",s.target.value)}),e.jsx(a,{message:l.estimated_time})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Garantia"}),e.jsx(H,{value:F,options:_,onChange:$,isClearable:!0,styles:N,placeholder:"Selecione ou defina a garantia",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9"}),e.jsx(a,{message:l.warranty})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Mão de Obra"}),e.jsx(u,{value:n(String(o.labor_value)),onChange:s=>c("labor_value",s.target.value)}),e.jsx(a,{message:l.labor_value})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Total"}),e.jsx(u,{value:n(String(o.total_value)),onChange:s=>c("total_value",s.target.value)}),e.jsx(a,{message:l.total_value})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Validade do orçamento(dias)"}),e.jsx(u,{value:n(String(o.validity)),onChange:s=>c("validity",s.target.value)}),e.jsx(a,{message:l.validity})]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Descrição"}),e.jsx("textarea",{className:f,value:o.description,onChange:s=>c("description",s.target.value)}),e.jsx(a,{message:l.description})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{children:"Observações"}),e.jsx("textarea",{className:f,value:o.obs,onChange:s=>c("obs",s.target.value)})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(R,{type:"submit",disabled:M,children:[e.jsx(P,{className:"mr-2"}),h?"Atualizar":"Salvar"]})})]})}export{se as default};
