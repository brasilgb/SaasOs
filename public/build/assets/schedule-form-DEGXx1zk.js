import{u as I,j as o,S as m,b as B}from"./vendor-Yym4ho6I.js";import{B as L}from"./button-iRz8StHV.js";import{I as T}from"./input-BrVcLNS3.js";import{L as d}from"./label-DErLoZ3z.js";import{T as t}from"./textarea-BLvCQVog.js";import{I as k}from"./input-error-DH5j_Nno.js";import{c as g}from"./dataSelect-YUEq-QLc.js";import{t as h}from"./app-toast-messages-CuWMo7zT.js";import"./utils-BjLQSj9Q.js";import"./index-BrLnunQt.js";function J({customers:x,initialData:s,technicals:v}){var p;const f=!!s,u=x.map(e=>({value:e.id,label:e.name})),n=v.map(e=>({value:e.id,label:e.name})),{data:l,setData:r,post:b,patch:j,progress:A,processing:S,reset:N,errors:c}=I({customer_id:(s==null?void 0:s.customer_id)??"",schedules:(s==null?void 0:s.schedules)??"",service:(s==null?void 0:s.service)??"",details:(s==null?void 0:s.details)??"",user_id:(s==null?void 0:s.user_id)??"",status:(s==null?void 0:s.status)??"",observations:(s==null?void 0:s.observations)??""}),i=e=>{r("customer_id",(e==null?void 0:e.value)||"")},y=e=>{e.preventDefault(),f?j(route("app.schedules.update",s.id),{onSuccess:()=>{h("Sucesso","Agendamento atualizado com sucesso")}}):b(route("app.schedules.store"),{onSuccess:()=>{h("Sucesso","Agendamento criado com sucesso"),N()}})},_=e=>{r("status",e==null?void 0:e.value)},C=e=>{r("user_id",e==null?void 0:e.value)},w=u==null?void 0:u.filter(e=>e.value==(s==null?void 0:s.customer_id)).map(e=>({value:e.value,label:e.label})),F=(p=g)==null?void 0:p.filter(e=>e.value==(s==null?void 0:s.status)).map(e=>({value:e.value,label:e.label})),z=n==null?void 0:n.filter(e=>e.value==(s==null?void 0:s.user_id)).map(e=>({value:e.value,label:e.label}));return o.jsxs("form",{onSubmit:y,autoComplete:"off",className:"space-y-8",children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[o.jsxs("div",{className:" grid gap-2",children:[o.jsx(d,{htmlFor:"customer_id",children:"Cliente"}),o.jsx(m,{menuPosition:"fixed",defaultValue:w,options:u,onChange:i,placeholder:"Selecione o cliente",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(e,a)=>({...e,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:e=>({...e}),menuList:e=>({...e,fontSize:"14px"})}}),o.jsx(k,{className:"mt-2",message:c.customer_id})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(d,{htmlFor:"schedules",children:"Horário da visita"}),o.jsx(T,{type:"datetime-local",id:"schedules",value:l.schedules,onChange:e=>r("schedules",e.target.value)})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsx(d,{htmlFor:"service",children:"Serviços Requisitados"}),o.jsx(t,{id:"service",value:l.service,onChange:e=>r("service",e.target.value)}),c.service&&o.jsx("div",{className:"text-red-500 text-sm",children:c.service})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(d,{htmlFor:"details",children:"Detalhes do Serviço"}),o.jsx(t,{id:"details",value:l.details,onChange:e=>r("details",e.target.value)}),c.details&&o.jsx("div",{className:"text-red-500 text-sm",children:c.details})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[o.jsxs("div",{className:"grid gap-2",children:[o.jsx(d,{htmlFor:"service_status",children:"Técnico responsável"}),o.jsx(m,{menuPosition:"fixed",defaultValue:z,options:n,onChange:C,placeholder:"Selecione o técnico",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(e,a)=>({...e,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:e=>({...e}),menuList:e=>({...e,fontSize:"14px"})}})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(d,{htmlFor:"status",children:"Status do agendamento"}),o.jsx(m,{menuPosition:"fixed",defaultValue:F,options:g,onChange:_,placeholder:"Selecione o status",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(e,a)=>({...e,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:e=>({...e}),menuList:e=>({...e,fontSize:"14px"})}})]})]}),o.jsxs("div",{className:"grid gap-2",children:[o.jsx(d,{htmlFor:"observations",children:"Observações"}),o.jsx(t,{id:"observations",value:l.observations,onChange:e=>r("observations",e.target.value)})]}),o.jsx("div",{className:"flex justify-end",children:o.jsxs(L,{type:"submit",disabled:S,children:[o.jsx(B,{}),"Salvar"]})})]})}export{J as default};
