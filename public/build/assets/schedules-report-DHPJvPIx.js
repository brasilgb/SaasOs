import{r as u,j as o,b as n}from"./app-B6DbMwvR.js";import{B as x}from"./button-B14a0A0U.js";import{h as l}from"./moment-BLMuvzoS.js";import{p as a}from"./react-pdf.browser-C7xUp7dU.js";import h from"./SchedulesReportPDF-BwvxaBmD.js";import{L as j}from"./loader-circle-c-4bf4xv.js";import{F as D}from"./file-text-trJeIL6r.js";import"./index-Be8DDEln.js";import"./utils-CDN07tui.js";import"./tslib.es6-M_FJ09fS.js";import"./pt-br-DYu2O2EU.js";import"./createLucideIcon-CV065I_Y.js";function B({dateRange:r}){const[t,i]=u.useState(!1);async function p(){!(r!=null&&r.from)||!(r!=null&&r.to)||(i(!0),n.post(route("app.reports.store"),{type:"schedules",from:l(r.from).format("YYYY-MM-DD"),to:l(r.to).format("YYYY-MM-DD")},{preserveState:!1,preserveScroll:!0,onSuccess:async s=>{var m;const e=((m=s.props)==null?void 0:m.reportData)||[],c=await a(o.jsx(h,{data:e,dateRange:r})).toBlob(),f=URL.createObjectURL(c);window.open(f,"_blank")},onError:s=>{console.error("Erro ao gerar relatÃ³rio:",s)},onFinish:()=>i(!1)}))}return o.jsx("div",{className:"flex justify-center mt-4",children:o.jsx(x,{onClick:p,disabled:t||!(r!=null&&r.from)||!(r!=null&&r.to),className:"w-full sm:w-auto",children:t?o.jsxs(o.Fragment,{children:[o.jsx(j,{className:"mr-2 size-4 animate-spin"}),"Gerando PDF..."]}):o.jsxs(o.Fragment,{children:[o.jsx(D,{className:"mr-2 size-4"}),"Agendamentos de visitas"]})})})}export{B as default};
