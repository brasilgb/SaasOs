import{u as y,r as w,j as e,H as C,a2 as F,L as D,A as q,S as n,e as I}from"./vendor-DSyLU8h0.js";import{I as L,B as k}from"./icon-BSPrNu0D.js";import{B as m}from"./button-BbUgFgUv.js";import{A as E}from"./app-layout-CIqBmhmP.js";import{I as l}from"./input-D0WU2FnS.js";import{L as r}from"./label-HPS33Bwn.js";import{T as d}from"./textarea-CnNyks-r.js";import{a as c}from"./dataSelect-YUEq-QLc.js";import{I as B}from"./input-error-CaU8p-D5.js";import{d as O,c as z}from"./mask-Dzd4Hpc-.js";import{t as A}from"./app-toast-messages-BRPL5wWZ.js";import{D as M}from"./date-picker-DI91aHwz.js";import"./utils-BzNdXqU4.js";import"./app-sidebar-header-CrXZELhi.js";import"./badge-DOn3C0Xa.js";import"./moment-BLMuvzoS.js";import"./index-BBFqCoUG.js";import"./app-ZNQ0OXrE.js";/* empty css            */const P=[{title:"Dashboard",href:route("app.dashboard")},{title:"Ordens",href:route("app.orders.index")},{title:"Adicionar",href:"#"}];function ie({customers:u,equipments:p}){const x=u.map(s=>({value:s.id,label:s.name})),g=p.map(s=>({value:s.id,label:s.equipment})),{data:o,setData:a,post:h,progress:V,processing:v,reset:j,errors:t}=y({customer_id:"",equipment_id:"",model:"",password:"",defect:"",state_conservation:"",accessories:"",budget_description:"",budget_value:"0.00",service_status:"1",delivery_forecast:"",observations:""}),f=s=>{s.preventDefault(),h(route("app.orders.store"),{onSuccess:()=>{A("Sucesso","Ordem de serviço gerada com sucesso"),j()}})};w.useEffect(()=>{a("budget_value",O(o.budget_value))},[o.budget_value]);const b=s=>{a("customer_id",(s==null?void 0:s.value)||"")},_=s=>{a("equipment_id",s==null?void 0:s.value)},N=s=>{a("service_status",s==null?void 0:s.value)};return e.jsxs(E,{children:[e.jsx(C,{title:"Ordens"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{iconNode:F,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Ordens"})]}),e.jsx("div",{children:e.jsx(k,{breadcrumbs:P})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{children:e.jsx(m,{variant:"default",asChild:!0,children:e.jsxs(D,{href:route("app.orders.index"),children:[e.jsx(q,{"h-4":!0,"w-4":!0}),e.jsx("span",{children:"Voltar"})]})})}),e.jsx("div",{})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"border rounded-lg p-2",children:e.jsxs("form",{onSubmit:f,autoComplete:"off",className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-8 gap-4 mt-4",children:[e.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[e.jsx(r,{htmlFor:"customer_id",children:"Cliente"}),e.jsx(n,{options:x,onChange:b,placeholder:"Selecione o cliente",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(s,i)=>({...s,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:s=>({...s}),menuList:s=>({...s,fontSize:"14px"})}}),e.jsx(B,{className:"mt-2",message:t.customer_id})]}),e.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[e.jsx(r,{htmlFor:"equipment",children:"Equipamento"}),e.jsx(n,{menuPosition:"fixed",options:g,onChange:_,placeholder:"Selecione o equipamento",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(s,i)=>({...s,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:s=>({...s}),menuList:s=>({...s,fontSize:"14px"})}}),t.equipment_id&&e.jsx("div",{className:"text-red-500 text-sm",children:t.equipment_id})]}),e.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[e.jsx(r,{htmlFor:"model",children:"Modelo"}),e.jsx(l,{type:"text",id:"model",value:o.model,onChange:s=>a("model",s.target.value)}),t.model&&e.jsx("div",{className:"text-red-500 text-sm",children:t.model})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"password",children:"Senha"}),e.jsx(l,{type:"text",id:"password",value:o.password,onChange:s=>a("password",s.target.value)}),t.password&&e.jsx("div",{className:"text-red-500 text-sm",children:t.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"delivery_forecast",children:"Previsão de entrega"}),e.jsx(M,{mode:"single",date:o.delivery_forecast,setDate:s=>{if(!s){a("delivery_forecast","");return}const i=s,S=[i.getFullYear(),String(i.getMonth()+1).padStart(2,"0"),String(i.getDate()).padStart(2,"0")].join("-");a("delivery_forecast",S)}})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"defect",children:"Defeito relatado"}),e.jsx(d,{id:"defect",value:o.defect,onChange:s=>a("defect",s.target.value)}),t.defect&&e.jsx("div",{className:"text-red-500 text-sm",children:t.defect})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"state_conservation",children:"Estado de conservação"}),e.jsx(d,{id:"state_conservation",value:o.state_conservation,onChange:s=>a("state_conservation",s.target.value)}),t.state_conservation&&e.jsx("div",{children:t.state_conservation})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"accessories",children:"Acessórios"}),e.jsx(d,{id:"accessories",value:o.accessories,onChange:s=>a("accessories",s.target.value)})]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[e.jsx(r,{htmlFor:"budget_description",children:"Descrição pré-orcamento"}),e.jsx(d,{id:"budget_description",value:o.budget_description,onChange:s=>a("budget_description",s.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"budget_value",children:"Valor pré-orçamento"}),e.jsx(l,{type:"text",id:"budget_value",value:z(o.budget_value),onChange:s=>a("budget_value",s.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"service_status",children:"Status orçamento"}),e.jsx(n,{menuPosition:"fixed",options:c,onChange:N,placeholder:"Selecione o status",defaultValue:[{value:c[0].value,label:c[0].label}],className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(s,i)=>({...s,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:s=>({...s}),menuList:s=>({...s,fontSize:"14px"})}})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"observations",children:"Observações"}),e.jsx(d,{id:"observations",value:o.observations,onChange:s=>a("observations",s.target.value)}),t.observations&&e.jsx("div",{className:"text-red-500 text-sm",children:t.observations})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(m,{type:"submit",disabled:v,children:[e.jsx(I,{}),"Salvar"]})})]})})})]})}export{ie as default};
