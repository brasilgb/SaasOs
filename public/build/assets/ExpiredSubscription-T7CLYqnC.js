import{r,i as x,j as e,H as m,L as u}from"./vendor-DAFaRPSW.js";function z(g){const{requires_plan:h,plans:p=[],qr_code_base64:i,qr_code:s,payment_id:a}=g,[n,d]=r.useState(!1),[b,l]=r.useState(!!a),[o,f]=r.useState(0),j=60,y=()=>{s&&(navigator.clipboard.writeText(s),d(!0),setTimeout(()=>d(!1),2500))},v=t=>{x.post(route("payment.select-plan"),{plan_id:t})};return r.useEffect(()=>{if(!a)return;const t=setInterval(async()=>{try{f(N=>N+1),(await(await fetch(route("payment.status",a),{credentials:"same-origin"})).json()).paid&&(clearInterval(t),x.visit("/")),o>=j&&(clearInterval(t),l(!1))}catch(c){console.error("Erro ao verificar pagamento:",c),clearInterval(t),l(!1)}},5e3);return()=>clearInterval(t)},[a,o]),h?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-zinc-900",children:[e.jsx(m,{title:"Escolha um plano"}),e.jsxs("div",{className:"max-w-3xl w-full bg-white dark:bg-zinc-800 p-8 rounded-lg shadow text-gray-900 dark:text-gray-100",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Escolha um plano para continuar"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:p.map(t=>e.jsxs("div",{className:"border border-gray-200 dark:border-zinc-700 rounded-lg p-6 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.name}),e.jsxs("p",{className:"text-2xl font-bold mt-4",children:["R$ ",Number(t.value).toFixed(2)]})]}),e.jsx("button",{onClick:()=>v(t.id),className:"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded transition",children:"Selecionar plano"})]},t.id))}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(u,{method:"post",href:route("logout"),as:"button",className:"text-sm text-gray-500 dark:text-gray-400 hover:underline",children:"Sair do sistema"})})]})]}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-zinc-900",children:[e.jsx(m,{title:"Assinatura expirada"}),e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-zinc-800 p-8 rounded-lg shadow text-center text-gray-900 dark:text-gray-100",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Assinatura expirada"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Para continuar utilizando o sistema, realize o pagamento via Pix."}),e.jsx("div",{className:"flex justify-center mb-6 border-2 border-dashed border-gray-300 dark:border-zinc-600 rounded p-4",children:i?e.jsx("img",{src:`data:image/png;base64,${i}`,className:"w-48 h-48 bg-white p-2 rounded",alt:"QR Code Pix"}):e.jsx("div",{className:"w-48 h-48 flex items-center justify-center text-gray-400 dark:text-gray-500",children:"Gerando QR Code..."})}),e.jsx("button",{onClick:y,disabled:!s,className:`w-full py-3 rounded text-white transition ${n?"bg-green-600":"bg-blue-600 hover:bg-blue-700 disabled:opacity-50"}`,children:n?"Código Pix copiado!":"Copiar código Pix"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"A liberação é automática após a confirmação do pagamento."}),b?e.jsx("p",{className:"text-xs text-blue-600 mt-3",children:"Verificando pagamento automaticamente..."}):e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Caso já tenha pago, aguarde alguns instantes ou atualize a página."}),e.jsx("div",{className:"mt-6 border-t border-gray-200 dark:border-zinc-700 pt-4",children:e.jsx(u,{method:"post",href:route("logout"),as:"button",className:"text-sm text-gray-500 dark:text-gray-400 hover:underline",children:"Sair do sistema"})})]})]})}export{z as default};
