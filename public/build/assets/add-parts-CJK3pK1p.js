import{r as m,v as S,j as s}from"./app-DCnI_HxP.js";import{B as i}from"./button-BfKn22wR.js";import{D as w,a as C,b as P,c as D,d as I,e as A}from"./dialog-BhLGw9nv.js";import{I as M}from"./input-mDNVEJuw.js";import{L as k}from"./label-BRIa2r48.js";import{S as T}from"./react-select.esm-BuiBOHKS.js";import{e as c}from"./mask-B61Tbbsk.js";import{M as _}from"./memory-stick-BmJ6QEPx.js";import{T as q}from"./trash-2-DZF641rY.js";import{W as B}from"./wrench-Y2joWSJp.js";/* empty css            */import"./index-CWS71Hux.js";import"./utils-D-KgF5mV.js";import"./index-DnKN81on.js";import"./index-C6D8WiXG.js";import"./index-DYLeHT7A.js";import"./tslib.es6-M_FJ09fS.js";import"./x-DLdj1DOM.js";import"./createLucideIcon-zdM2FiJV.js";import"./floating-ui.utils.dom-sMmpZ9NL.js";function te({onSubmit:p,parts:l}){const[x,o]=m.useState(!1),[t,d]=m.useState([]),[L,u]=m.useState(""),h=l.map(e=>({value:e.id,label:e.name})),{setData:f,processing:g}=S({part_id:"",name:""}),j=e=>{e.preventDefault(),p(t),o(!1)},b=e=>{const a=parseInt(e==null?void 0:e.value);if(f("part_id",`${a}`),a){if(!t.some(n=>n.id===a)){const n=l.find(y=>y.id===a);d([...t,{...n,quantity:1}])}u("")}},v=e=>{d(t.filter(a=>a.id!==e))},N=(e,a)=>{d(t.map(r=>{if(r.id===e){const n=Math.max(1,parseInt(a)||1);return{...r,quantity:n}}return r}))};return s.jsx("div",{children:s.jsxs(w,{open:x,onOpenChange:o,children:[s.jsx(C,{asChild:!0,children:s.jsxs(i,{className:"gap-2",children:[s.jsx(_,{className:"h-4 w-4"}),"Peças"]})}),s.jsxs(P,{className:"sm:max-w-[600px]",children:[s.jsx(D,{children:s.jsx(I,{children:"Selecionar Peças"})}),s.jsxs("form",{onSubmit:j,autoComplete:"off",children:[s.jsx("div",{className:"grid gap-4 py-4",children:s.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[s.jsx(k,{htmlFor:"customer_id",children:"Peças"}),s.jsx(T,{options:h,onChange:b,placeholder:"Selecione a peça",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(e,a)=>({...e,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:e=>({...e}),menuList:e=>({...e,fontSize:"14px"})}})]})}),s.jsx("div",{className:"mb-4",children:t.map(e=>s.jsxs("div",{className:"flex justify-between items-center gap-2 p-2 border rounded",children:[s.jsx("div",{className:"text-sm w-38",children:e.name}),s.jsx(M,{type:"number",min:"1",value:e.quantity,onChange:a=>N(e.id,a.target.value),className:"w-20 mx-2 text-sm"}),s.jsx("div",{className:"text-sm w-4",children:c(e.sale_price)}),s.jsx("div",{className:"text-sm w-4",children:c(String(Number(e.sale_price)*Number(e.quantity)))}),s.jsx(i,{variant:"destructive",onClick:()=>v(e.id),className:"btn btn-danger btn-sm",children:s.jsx(q,{className:"h-4 w-4"})})]},e.id))}),s.jsxs(A,{className:"gap-2",children:[s.jsx(i,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancelar"}),s.jsxs(i,{type:"submit",disabled:g,children:[s.jsx(B,{className:"h-4 w-4"}),"Inserir na ordem"]})]})]})]})]})})}export{te as default};
