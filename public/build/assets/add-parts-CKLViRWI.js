import{r as l,u as S,j as s,a3 as w,S as C,aN as P,a0 as D}from"./vendor-9cxgAHzg.js";import{B as i}from"./button-DFigV1aq.js";import{D as I,a as A,b as k,c as M,d as _,e as q}from"./dialog-CDKjSUwF.js";import{I as T}from"./input-D2aH1Wd-.js";import{L as B}from"./label-BRTi3l1J.js";import{c as m}from"./mask-Dzd4Hpc-.js";import"./utils-veIRhKZd.js";function K({onSubmit:u,parts:c}){const[x,o]=l.useState(!1),[t,d]=l.useState([]),[F,h]=l.useState(""),p=c.map(e=>({value:e.id,label:e.name})),{data:L,setData:g,processing:j,post:z,errors:E,reset:O}=S({part_id:"",name:""}),f=e=>{e.preventDefault(),u(t),o(!1)},b=e=>{const a=parseInt(e==null?void 0:e.value);if(g("part_id",`${a}`),a){if(!t.some(n=>n.id===a)){const n=c.find(y=>y.id===a);d([...t,{...n,quantity:1}])}h("")}},N=e=>{d(t.filter(a=>a.id!==e))},v=(e,a)=>{d(t.map(r=>{if(r.id===e){const n=Math.max(1,parseInt(a)||1);return{...r,quantity:n}}return r}))};return s.jsx("div",{children:s.jsxs(I,{open:x,onOpenChange:o,children:[s.jsx(A,{asChild:!0,children:s.jsxs(i,{className:"gap-2",children:[s.jsx(w,{className:"h-4 w-4"}),"Peças"]})}),s.jsxs(k,{className:"sm:max-w-[600px]",children:[s.jsx(M,{children:s.jsx(_,{children:"Selecionar Peças"})}),s.jsxs("form",{onSubmit:f,autoComplete:"off",children:[s.jsx("div",{className:"grid gap-4 py-4",children:s.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[s.jsx(B,{htmlFor:"customer_id",children:"Peças"}),s.jsx(C,{options:p,onChange:b,placeholder:"Selecione a peça",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(e,a)=>({...e,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:e=>({...e}),menuList:e=>({...e,fontSize:"14px"})}})]})}),s.jsx("div",{className:"mb-4",children:t.map(e=>s.jsxs("div",{className:"flex justify-between items-center gap-2 p-2 border rounded",children:[s.jsx("div",{className:"text-sm w-38",children:e.name}),s.jsx(T,{type:"number",min:"1",value:e.quantity,onChange:a=>v(e.id,a.target.value),className:"w-20 mx-2 text-sm"}),s.jsx("div",{className:"text-sm w-4",children:m(e.sale_price)}),s.jsx("div",{className:"text-sm w-4",children:m(String(Number(e.sale_price)*Number(e.quantity)))}),s.jsx(i,{variant:"destructive",onClick:()=>N(e.id),className:"btn btn-danger btn-sm",children:s.jsx(P,{className:"h-4 w-4"})})]},e.id))}),s.jsxs(q,{className:"gap-2",children:[s.jsx(i,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancelar"}),s.jsxs(i,{type:"submit",disabled:j,children:[s.jsx(D,{className:"h-4 w-4"}),"Inserir na ordem"]})]})]})]})]})})}export{K as default};
