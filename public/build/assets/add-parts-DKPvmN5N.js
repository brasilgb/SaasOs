import{r as l,v as N,j as s}from"./app-D95nIBCJ.js";import{B as r}from"./button-DUxTs59i.js";import{D as S,a as w,b as C,c as P,d as D,e as I}from"./dialog-Cv3FA1ba.js";import{I as A}from"./input-WVJyE6wF.js";import{L as M}from"./label-ILpRmUHx.js";import{S as k}from"./react-select.esm-Dr_YN-WQ.js";import{e as T}from"./mask-B61Tbbsk.js";import{M as _}from"./memory-stick-Ks9ednoy.js";import{T as q}from"./trash-2-CA-0NrC2.js";import{W as B}from"./wrench-Bk32GY19.js";import"./utils-D-KgF5mV.js";import"./index-BatG8mnm.js";import"./index-DAK4vICW.js";import"./index-BJK0evfi.js";import"./tslib.es6-M_FJ09fS.js";import"./x-Cl2SYEt3.js";import"./createLucideIcon-DX9zKF4t.js";import"./floating-ui.utils.dom-sMmpZ9NL.js";function se({onSubmit:c,parts:m}){const[p,o]=l.useState(!1),[t,d]=l.useState([]),[F,x]=l.useState(""),h=m.map(e=>({value:e.id,label:e.name})),{setData:u,processing:f}=N({part_id:"",name:""}),g=e=>{e.preventDefault(),c(t),o(!1)},j=e=>{const a=parseInt(e==null?void 0:e.value);if(u("part_id",`${a}`),a){if(!t.some(n=>n.id===a)){const n=m.find(y=>y.id===a);d([...t,{...n,quantity:1}])}x("")}},b=e=>{d(t.filter(a=>a.id!==e))},v=(e,a)=>{d(t.map(i=>{if(i.id===e){const n=Math.max(1,parseInt(a)||1);return{...i,quantity:n}}return i}))};return s.jsx("div",{children:s.jsxs(S,{open:p,onOpenChange:o,children:[s.jsx(w,{asChild:!0,children:s.jsxs(r,{className:"gap-2",children:[s.jsx(_,{className:"h-4 w-4"}),"Peças"]})}),s.jsxs(C,{className:"sm:max-w-[600px]",children:[s.jsx(P,{children:s.jsx(D,{children:"Selecionar Peças"})}),s.jsxs("form",{onSubmit:g,autoComplete:"off",children:[s.jsx("div",{className:"grid gap-4 py-4",children:s.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[s.jsx(M,{htmlFor:"customer_id",children:"Peças"}),s.jsx(k,{options:h,onChange:j,placeholder:"Selecione a peça",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(e,a)=>({...e,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:e=>({...e}),menuList:e=>({...e,fontSize:"14px"})}})]})}),s.jsx("div",{className:"mb-4",children:t.map(e=>s.jsxs("div",{className:"flex justify-between items-center gap-2 p-2 border rounded",children:[s.jsx("div",{className:"text-sm w-38",children:e.name}),s.jsx(A,{type:"number",min:"1",value:e.quantity,onChange:a=>v(e.id,a.target.value),className:"w-20 mx-2 text-sm"}),s.jsx("div",{className:"text-sm w-4",children:e.sale_price}),s.jsx("div",{className:"text-sm w-4",children:T((e.sale_price*e.quantity).toFixed(2))}),s.jsx(r,{variant:"destructive",onClick:()=>b(e.id),className:"btn btn-danger btn-sm",children:s.jsx(q,{className:"h-4 w-4"})})]},e.id))}),s.jsxs(I,{className:"gap-2",children:[s.jsx(r,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancelar"}),s.jsxs(r,{type:"submit",disabled:f,children:[s.jsx(B,{className:"h-4 w-4"}),"Inserir na ordem"]})]})]})]})]})})}export{se as default};
