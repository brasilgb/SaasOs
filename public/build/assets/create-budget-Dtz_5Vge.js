import{a as D,r as n,u as P,j as e,H as z,L as V}from"./app-MEKSZ4ek.js";import{B as T}from"./breadcrumbs-C06ZVNsp.js";import{I as H,P as G}from"./app-sidebar-header-EAr6IRXk.js";import{B as b}from"./button-CBDbSfDr.js";import{A as R}from"./app-layout-ClPqcTtl.js";import{I as c}from"./input-BAMCjdPf.js";import{L as o}from"./label-BHabjocy.js";import{C as j}from"./react-select-creatable.esm-BxKntdh_.js";import{I as i}from"./input-error-Bj5aMSbu.js";import{u as y,d,e as p}from"./mask-CLJbp35z.js";import{A as $}from"./arrow-left-CIDnpijY.js";import{c as q}from"./createLucideIcon-D_L4tRsc.js";import{S as J}from"./save-BCGFNgvd.js";import"./utils-CDN07tui.js";import"./chevron-right-CvRHdJi3.js";import"./wrench-CFoxzA55.js";import"./shopping-cart-CoVcPoB_.js";import"./file-text-CR9dZniz.js";import"./printer-CvVftoJ4.js";import"./index-BTliW4S2.js";import"./index-C6c-2c83.js";import"./index-CZGcpa9-.js";import"./index-D2y-0FN4.js";import"./tslib.es6-M_FJ09fS.js";import"./x-DNfoSlnG.js";import"./index-JFE_OzD8.js";import"./floating-ui.dom-CT80KWrA.js";import"./index-DY9xQedW.js";import"./badge-Ct96GVvc.js";import"./moment-BLMuvzoS.js";import"./index-CvaJtQOb.js";import"./chevron-down-DKnpKdD4.js";import"./menu-BhzJh1PW.js";import"./book-open-Us25QUmp.js";import"./Select-ef7c0426.esm-CN6D0KDr.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Q=q("calculator",K),U=[{title:"Dashboard",href:route("app.dashboard")},{title:"Orçamentos",href:route("app.budgets.index")},{title:"Adicionar",href:route("app.budgets.create")}],X=[{value:"1 meses",label:"1 mês"},{value:"3 meses",label:"3 meses"},{value:"6 meses",label:"6 meses"},{value:"1 ano",label:"1 ano"}];function Ee({budgets:f}){const{auth:Y}=D().props,_=f.map(a=>({value:a,label:a})),[N,C]=n.useState(_),[w,g]=n.useState(null),[k,S]=n.useState(X),[M,v]=n.useState(null),{data:s,setData:t,post:O,progress:Z,processing:F,reset:I,errors:r}=P({category:"",service:"",model:"",description:"",estimated_time:"",part_value:"",labor_value:"",total_value:"",warranty:"",obs:""}),u=n.useCallback(()=>{const a=parseFloat(y(s.part_value))||0,l=parseFloat(y(s.labor_value))||0,m=a+l;t("total_value",d(String(m)))},[s.part_value,s.labor_value,t]);n.useEffect(()=>{(s.part_value||s.labor_value)&&u()},[s.part_value,s.labor_value,u]),n.useEffect(()=>{t(a=>({...a,part_value:p(a.part_value),labor_value:p(a.labor_value),total_value:p(a.total_value)}))},[s.part_value,s.labor_value,s.total_value]);const L=a=>{a.preventDefault(),O(route("app.budgets.store"),{onSuccess:()=>I()})},A=a=>{g(a),t("category",a?a.value:"")},B=a=>{const l={label:a,value:a};C(m=>[...m,l]),g(l),t("category",l.value)},E=a=>{v(a),t("warranty",a?a.value:"")},W=a=>{const l={label:a,value:a};S(m=>[...m,l]),v(l),t("warranty",l.value)},h={control:(a,l)=>({...a,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:a=>({...a}),menuList:a=>({...a,fontSize:"14px"})},x="flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50";return e.jsxs(R,{children:[e.jsx(z,{title:"Mensagens"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{iconNode:G,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Orçamentos"})]}),e.jsx("div",{children:e.jsx(T,{breadcrumbs:U})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{children:e.jsx(b,{variant:"default",asChild:!0,children:e.jsxs(V,{href:route("app.budgets.index"),children:[e.jsx($,{"h-4":!0,"w-4":!0}),e.jsx("span",{children:"Voltar"})]})})}),e.jsx("div",{})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"border rounded-lg p-2",children:e.jsxs("form",{onSubmit:L,className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"category",children:"Categoria (ou Criar Nova)"}),e.jsx(j,{id:"category",value:w,options:N,onCreateOption:B,onChange:A,isClearable:!0,placeholder:"Selecione ou digite para criar a categoria",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:h}),e.jsx(i,{className:"mt-2",message:r.category})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"service",children:"Serviço"}),e.jsx(c,{id:"service",type:"text",value:s.service,onChange:a=>t("service",a.target.value)}),e.jsx(i,{className:"mt-2",message:r.service})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"model",children:"Modelo"}),e.jsx(c,{id:"model",type:"text",value:s.model,onChange:a=>t("model",a.target.value)}),e.jsx(i,{className:"mt-2",message:r.model})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"part_value",children:"Valor em Peças"}),e.jsx(c,{id:"part_value",type:"text",value:d(s.part_value),onChange:a=>t("part_value",d(a.target.value))}),e.jsx(i,{className:"mt-2",message:r.part_value})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"estimated_time",children:"Tempo Estimado (h)"}),e.jsx(c,{id:"estimated_time",value:s.estimated_time,onChange:a=>t("estimated_time",a.target.value)}),e.jsx(i,{className:"mt-2",message:r.estimated_time})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"warranty",children:"Garantia (Meses/Ano)"}),e.jsx(j,{id:"warranty",value:M,options:k,onCreateOption:W,onChange:E,isClearable:!0,placeholder:"Selecione ou defina a garantia",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:h}),e.jsx(i,{className:"mt-2",message:r.warranty})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"labor_value",children:"Valor da Mão de Obra"}),e.jsx(c,{id:"labor_value",value:d(s.labor_value),onChange:a=>t("labor_value",d(a.target.value))}),e.jsx(i,{className:"mt-2",message:r.labor_value})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"total_value",children:"Valor Total"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{id:"total_value",value:d(s.total_value),onChange:a=>t("total_value",d(a.target.value)),className:"pr-10"}),e.jsx("button",{type:"button",onClick:u,className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx(Q,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx(i,{className:"mt-2",message:r.total_value})]})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"description",children:"Descrição do serviço e peças utilizadas"}),e.jsx("textarea",{id:"description",rows:4,className:x,value:s.description,onChange:a=>t("description",a.target.value)}),e.jsx(i,{className:"mt-2",message:r.description})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"obs",children:"Observações"}),e.jsx("textarea",{id:"obs",rows:4,className:x,value:s.obs,onChange:a=>t("obs",a.target.value)}),e.jsx(i,{className:"mt-2",message:r.obs})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(b,{type:"submit",disabled:F,children:[e.jsx(J,{}),"Salvar"]})})]})})})]})}export{Ee as default};
