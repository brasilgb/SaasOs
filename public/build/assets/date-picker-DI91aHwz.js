import{bb as j,j as a,bc as z,aK as C,x as Y,aS as M,r as g,bd as S,be as O,bf as P,bg as R,a3 as B,bh as E}from"./vendor-DSyLU8h0.js";import{c as t}from"./utils-BzNdXqU4.js";import{b as y,B as T}from"./button-BbUgFgUv.js";import{I as F}from"./input-D0WU2FnS.js";import{h as v}from"./moment-BLMuvzoS.js";function I({className:d,classNames:s,showOutsideDays:o=!0,captionLayout:c="label",buttonVariant:f="ghost",formatters:x,components:u,...h}){const r=j();return a.jsx(z,{showOutsideDays:o,className:t("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,d),captionLayout:c,formatters:{formatMonthDropdown:l=>l.toLocaleString("default",{month:"short"}),...x},classNames:{root:t("w-fit",r.root),months:t("flex gap-4 flex-col md:flex-row relative",r.months),month:t("flex flex-col w-full gap-4",r.month),nav:t("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",r.nav),button_previous:t(y({variant:f}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",r.button_previous),button_next:t(y({variant:f}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",r.button_next),month_caption:t("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",r.month_caption),dropdowns:t("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",r.dropdowns),dropdown_root:t("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",r.dropdown_root),dropdown:t("absolute bg-popover inset-0 opacity-0",r.dropdown),caption_label:t("select-none font-medium",c==="label"?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",r.caption_label),table:"w-full border-collapse",weekdays:t("flex",r.weekdays),weekday:t("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",r.weekday),week:t("flex w-full mt-2",r.week),week_number_header:t("select-none w-(--cell-size)",r.week_number_header),week_number:t("text-[0.8rem] select-none text-muted-foreground",r.week_number),day:t("relative w-full h-full p-0 text-center [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",h.showWeekNumber?"[&:nth-child(2)[data-selected=true]_button]:rounded-l-md":"[&:first-child[data-selected=true]_button]:rounded-l-md",r.day),range_start:t("rounded-l-md bg-accent",r.range_start),range_middle:t("rounded-none",r.range_middle),range_end:t("rounded-r-md bg-accent",r.range_end),today:t("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",r.today),outside:t("text-muted-foreground aria-selected:text-muted-foreground",r.outside),disabled:t("text-muted-foreground opacity-50",r.disabled),hidden:t("invisible",r.hidden),...s},components:{Root:({className:l,rootRef:i,...p})=>a.jsx("div",{"data-slot":"calendar",ref:i,className:t(l),...p}),Chevron:({className:l,orientation:i,...p})=>i==="left"?a.jsx(C,{className:t("size-4",l),...p}):i==="right"?a.jsx(Y,{className:t("size-4",l),...p}):a.jsx(M,{className:t("size-4",l),...p}),DayButton:L,WeekNumber:({children:l,...i})=>a.jsx("td",{...i,children:a.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:l})}),...u},...h})}function L({className:d,day:s,modifiers:o,...c}){const f=j(),x=g.useRef(null);return g.useEffect(()=>{var u;o.focused&&((u=x.current)==null||u.focus())},[o.focused]),a.jsx(T,{ref:x,variant:"ghost",size:"icon","data-day":s.date.toLocaleDateString(),"data-selected-single":o.selected&&!o.range_start&&!o.range_end&&!o.range_middle,"data-range-start":o.range_start,"data-range-end":o.range_end,"data-range-middle":o.range_middle,className:t("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",f.day,d),...c})}function A({...d}){return a.jsx(S,{"data-slot":"popover",...d})}function $({...d}){return a.jsx(O,{"data-slot":"popover-trigger",...d})}function q({className:d,align:s="center",sideOffset:o=4,...c}){return a.jsx(P,{children:a.jsx(R,{"data-slot":"popover-content",align:s,sideOffset:o,className:t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",d),...c})})}v.locale("pt-br");const H=v.months(),W=new Date().getFullYear(),K=Array.from({length:100},(d,s)=>W-80+s);function X({date:d,setDate:s,mode:o="range"}){const[c,f]=g.useState(!1);function x(e){if(!e)return;if(e instanceof Date)return e;const[n,m,w]=e.split("-").map(Number);return new Date(n,m-1,w)}const u=g.useMemo(()=>{const e=n=>{if(n)return x(n)};if(o==="range"){const n=d;return{from:e(n==null?void 0:n.from),to:e(n==null?void 0:n.to)}}return e(d)},[d,o]),h=g.useMemo(()=>{if(o==="range"){const e=u;return(e==null?void 0:e.from)||new Date}return u||new Date},[u,o]),[r,l]=g.useState(h);g.useEffect(()=>{c&&l(h)},[c,h]);const i=g.useRef(!1),p=g.useMemo(()=>{if(o==="range"){const n=u;return n!=null&&n.from?n.to?`${v(n.from).format("DD/MM/YYYY")} - ${v(n.to).format("DD/MM/YYYY")}`:v(n.from).format("DD/MM/YYYY"):"Selecione o intervalo"}const e=u;return e?v(e).format("DD/MM/YYYY"):"Selecione a data"},[u,o]),_=(e,n,m,w)=>{if(!e){s(void 0),i.current=!1;return}const b=u;if(b!=null&&b.from&&(b!=null&&b.to)){s({from:e.from,to:void 0}),i.current=!0;return}if(e.from&&e.to&&e.from.getTime()===e.to.getTime()){s({from:e.from,to:void 0}),i.current=!0;return}s(e),i.current?e.from&&e.to&&(i.current=!1,f(!1)):i.current=!0},N=(e,n,m,w)=>{s(e),f(!1)},D=e=>{const n=parseInt(e.target.value),m=new Date(r);m.setMonth(n),l(m)},k=e=>{const n=parseInt(e.target.value),m=new Date(r);m.setFullYear(n),l(m)};return a.jsx("div",{className:"flex flex-col gap-3 w-full",children:a.jsxs(A,{open:c,onOpenChange:f,children:[a.jsx($,{asChild:!0,children:a.jsxs("div",{className:"relative",children:[a.jsx(F,{id:"date",value:p,placeholder:o==="range"?"Selecione o intervalo":"Selecione a data",className:"bg-background pr-10 cursor-pointer",readOnly:!0,onClick:()=>f(!0),"aria-label":"Selecionar data"}),a.jsx("div",{className:"absolute top-1/2 right-3 -translate-y-1/2 text-muted-foreground",children:a.jsx(B,{className:"size-3.5"})})]})}),a.jsxs(q,{className:"w-auto overflow-hidden p-3",align:"end",alignOffset:-8,sideOffset:10,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[a.jsx("select",{className:"border rounded-md px-2 py-1 text-sm bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",value:new Date(r).getMonth(),onChange:D,children:H.map((e,n)=>a.jsx("option",{value:n,children:e.charAt(0).toUpperCase()+e.slice(1)},n))}),a.jsx("select",{className:"border rounded-md px-2 py-1 text-sm bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",value:new Date(r).getFullYear(),onChange:k,children:K.map(e=>a.jsx("option",{value:e,children:e},e))})]}),a.jsx(I,{locale:E,mode:o,selected:u,month:new Date(r),onMonthChange:l,onSelect:o==="range"?_:N,className:"rounded-lg border shadow-sm"}),a.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[a.jsx("button",{type:"button",onClick:()=>{const e=new Date;s(o==="range"?{from:e,to:e}:e),l(e),f(!1),i.current=!1},className:"text-sm font-medium text-primary hover:text-primary/80 transition-colors",children:"Hoje"}),d&&a.jsx("button",{type:"button",onClick:()=>{s(void 0),i.current=!1},className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Limpar"})]})]})]})})}export{X as D};
