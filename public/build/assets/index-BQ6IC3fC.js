import{q as y,v as w,r as I,j as e,$ as S}from"./app-DCnI_HxP.js";import{A as R}from"./app-layout-DxBGAiVe.js";import{A as g}from"./app-alert-success-DMEC_q9u.js";import{B as A}from"./breadcrumbs-BsdwTXbF.js";import{I as O}from"./app-sidebar-header-DLt7YaN_.js";import{B as P}from"./button-BfKn22wR.js";import{H as k}from"./heading-small-Uix_UL6Y.js";import{W as B}from"./wrench-Y2joWSJp.js";import{S as C}from"./save-DoEGlfbT.js";/* empty css            */import"./mask-B61Tbbsk.js";import"./moment-C5S46NFB.js";import"./index-DYLeHT7A.js";import"./index-CWS71Hux.js";import"./index-C6D8WiXG.js";import"./index-BFQivYzp.js";import"./floating-ui.utils.dom-sMmpZ9NL.js";import"./index-DnKN81on.js";import"./tslib.es6-M_FJ09fS.js";import"./index-BCmTOknK.js";import"./index-CePBMRvY.js";import"./utils-D-KgF5mV.js";import"./chevron-down-BM92jHKT.js";import"./createLucideIcon-zdM2FiJV.js";import"./menu-CStCioDE.js";import"./book-open-DQF6g-8z.js";import"./chevron-right-vMqoGcey.js";import"./shopping-cart-DJJ_2Bb7.js";import"./memory-stick-BmJ6QEPx.js";import"./file-text-Cv2180fq.js";import"./printer-BW95ybB4.js";import"./x-DLdj1DOM.js";import"./badge-CV2106GR.js";const L=[{title:"Dashboard",href:route("app.dashboard")},{title:"Ordens",href:route("app.orders.index")},{title:"Imagens",href:"#"}],ge=({savedimages:o,orderid:l,errors:n,success:U,error:c})=>{const{flash:a}=y().props,{data:p,post:h,delete:u,processing:j,setData:x}=w({images:[],order_id:l}),[m,d]=I.useState([]),b=s=>{if(s.target.files){const r=Array.from(s.target.files),i=r.map(t=>({file:t,preview:URL.createObjectURL(t),id:URL.createObjectURL(t)}));d(t=>[...t,...i]),x("images",[...p.images,...r])}},f=s=>{d(r=>r.filter(i=>i.id!==s)),x("images",p.images.filter((r,i)=>{var t;return((t=m[i])==null?void 0:t.id)!==s}))},v=s=>{s.preventDefault(),h(route("app.images.store")),d([])},N=s=>{u(route("app.images.destroy",s))};return console.log(o),e.jsxs(R,{children:[a.message&&e.jsx(g,{message:a.message}),a.error&&e.jsx(g,{message:a.error}),e.jsx(S,{title:"Imagens de Ordens"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{iconNode:B,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Ordens"})]}),e.jsx("div",{children:e.jsx(A,{breadcrumbs:L})})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"border rounded-lg",children:e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"pb-4",children:e.jsx(k,{title:"Imagens para ordens de serviço",description:"Cadastre imagens de equipamentos."})}),e.jsx("div",{children:e.jsxs("h1",{className:"text-lg",children:["Ordem#",e.jsx("span",{children:l})]})})]}),c&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Erro!"}),e.jsxs("span",{className:"block sm:inline",children:[" ",c]})]}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"images",className:"block text-gray-700 text-sm font-bold mb-2",children:"Selecione Imagens:"}),e.jsx("input",{type:"file",id:"images",name:"images[]",multiple:!0,accept:"image/*",onChange:b,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),n.images&&e.jsx("p",{className:"text-red-500 text-xs italic",children:n.images})]}),o.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Imagens disponíveis no banco:"}),e.jsx("div",{className:"grid md:grid-cols-2 md:md:grid-cols-3 lg:md:grid-cols-4 gap-4",children:o.map(s=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:`/storage/orders/${l}/${s.filename}`,alt:"Preview",className:"w-full h-32 object-cover rounded shadow-md"}),e.jsx("button",{type:"button",onClick:()=>N(s.id),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full h-4 w-4 items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",title:"Remover imagem",children:"×"})]},s.id))})]}),m.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pré-visualização:"}),e.jsx("div",{className:"grid md:grid-cols-2 md:md:grid-cols-3 lg:md:grid-cols-4 gap-4",children:m.map(s=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s.preview,alt:"Preview",className:"w-full h-32 object-cover rounded shadow-md"}),e.jsx("button",{type:"button",onClick:()=>f(s.id),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full h-4 w-4 items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",title:"Remover imagem",children:"×"})]},s.id))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(P,{type:"submit",disabled:j,children:[e.jsx(C,{}),"Salvar"]})})]})]})})})]})};export{ge as default};
