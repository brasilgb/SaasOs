import{r as s,i as l,j as e,H as o,L as c}from"./vendor-DAFaRPSW.js";function y(x){const{requires_plan:m,plans:u=[],qr_code_base64:i,qr_code:r,payment_id:a}=x,[n,d]=s.useState(!1),[g]=s.useState(!!a),h=()=>{r&&(navigator.clipboard.writeText(r),d(!0),setTimeout(()=>d(!1),2500))},b=t=>{l.post(route("payment.select-plan"),{plan_id:t})};return s.useEffect(()=>{if(!a)return;const t=setInterval(async()=>{try{(await(await fetch(route("payment.status",a))).json()).paid&&(clearInterval(t),l.visit("/"))}catch{}},5e3);return()=>clearInterval(t)},[a]),m?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-zinc-900",children:[e.jsx(o,{title:"Escolha um plano"}),e.jsxs("div",{className:"max-w-3xl w-full bg-white dark:bg-zinc-800 p-8 rounded-lg shadow text-gray-900 dark:text-gray-100",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Escolha um plano para continuar"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:u.map(t=>e.jsxs("div",{className:"border border-gray-200 dark:border-zinc-700 rounded-lg p-6 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.name}),e.jsxs("p",{className:"text-2xl font-bold mt-4",children:["R$ ",Number(t.value).toFixed(2)]})]}),e.jsx("button",{onClick:()=>b(t.id),className:"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded transition",children:"Selecionar plano"})]},t.id))}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(c,{method:"post",href:route("logout"),as:"button",className:"text-sm text-gray-500 dark:text-gray-400 hover:underline",children:"Sair do sistema"})})]})]}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-zinc-900",children:[e.jsx(o,{title:"Assinatura expirada"}),e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-zinc-800 p-8 rounded-lg shadow text-center text-gray-900 dark:text-gray-100",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Assinatura expirada"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Para continuar utilizando o sistema, realize o pagamento via Pix."}),e.jsx("div",{className:"flex justify-center mb-6 border-2 border-dashed border-gray-300 dark:border-zinc-600 rounded p-4",children:i?e.jsx("img",{src:`data:image/png;base64,${i}`,className:"w-48 h-48 bg-white p-2 rounded",alt:"QR Code Pix"}):e.jsx("div",{className:"w-48 h-48 flex items-center justify-center text-gray-400 dark:text-gray-500",children:"Gerando QR Code..."})}),e.jsx("button",{onClick:h,disabled:!r,className:`w-full py-3 rounded text-white transition
                        ${n?"bg-green-600":"bg-blue-600 hover:bg-blue-700"}`,children:n?"Código Pix copiado!":"Copiar código Pix"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"A liberação é automática após a confirmação do pagamento."}),g&&e.jsx("p",{className:"text-xs text-blue-600 mt-3",children:"Verificando pagamento automaticamente..."}),e.jsx("div",{className:"mt-6 border-t border-gray-200 dark:border-zinc-700 pt-4",children:e.jsx(c,{method:"post",href:route("logout"),as:"button",className:"text-sm text-gray-500 dark:text-gray-400 hover:underline",children:"Sair do sistema"})})]})]})}export{y as default};
