import{r as j,j as e,l as x,bE as m,i as p,f as u,H as f,a2 as b,L as c,P as g,e as N}from"./vendor-9cxgAHzg.js";import{B as v}from"./breadcrumbs-Bxu_pr7n.js";import{I as y}from"./app-sidebar-header-CoU5c2A1.js";import{A as D}from"./app-layout-DUf7vRy4.js";import{h as M}from"./moment-BLMuvzoS.js";import{T as w,a as C,b as d,c as i,d as T,e as r,f as B}from"./table-wiBNsqwM.js";import{B as n}from"./button-DFigV1aq.js";import{I as S,A as _}from"./app-pagination-C96396Mq.js";import{A}from"./action-delete-tU8Ag1GK.js";import{B as o}from"./badge-Y4wF56ht.js";import{D as P,a as E,b as H,c as L,d as k,f as q,e as I,g as R}from"./dialog-CDKjSUwF.js";import{a as Y}from"./functions-Cy-IdLF_.js";import"./utils-veIRhKZd.js";import"./use-mobile-navigation-CPrEe7uA.js";import"./mask-Dzd4Hpc-.js";import"./index-C6x6Dy02.js";import"./app-BBFknnHm.js";import"./input-D2aH1Wd-.js";function O({message:a}){const[t,l]=j.useState(!1),s=h=>{h.preventDefault(),p.patch(route("app.messages.read",a.id),{status:!a.status,title:a.title,message:a.message,sender_id:a.sender.id,recipient_id:a.recipient.id}),l(!1)};return e.jsxs(P,{open:t,onOpenChange:l,children:[e.jsx(E,{asChild:!0,children:e.jsx(n,{variant:"default",size:"icon",children:e.jsx(x,{})})}),e.jsxs(H,{className:"sm:max-w-[425px]",children:[e.jsxs(L,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(m,{})," Ler mensagem"]}),e.jsx(q,{children:"Para marcar a mensage como lida clique em marcar como lida, ou para sair sem ler clique em sair."})]}),e.jsxs("div",{className:"grid border-t bg-gray-50 rounded-md",children:[e.jsx("h1",{className:"text-lg font-bold text-gray-600 border-b border-gray-200 px-2 py-1",children:"Mensagem"}),e.jsx("p",{className:"text-sm text-gray-500 p-2",children:a.message})]}),e.jsxs(I,{children:[e.jsx(R,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Sair"})}),e.jsx(n,{onClick:s,type:"submit",children:a.status?"Marcar como não lida":"Marcar como lida"})]})]})]})}const z=[{title:"Dashboard",href:route("app.dashboard")},{title:"Mensagens",href:"#"}];function ne({messages:a}){var l;const{auth:t}=u().props;return e.jsxs(D,{children:[e.jsx(f,{title:"Mensagens"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{iconNode:b,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Mensagens"})]}),e.jsx("div",{children:e.jsx(v,{breadcrumbs:z})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{className:"w-full",children:e.jsx(S,{placeholder:"Buscar po número da mensagem nome do destinatário",url:"app.messages.index"})}),e.jsx("div",{className:"w-full flex justify-end",children:e.jsx(n,{variant:"default",asChild:!0,children:e.jsxs(c,{href:route("app.messages.create"),children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{children:"Mensagem"})]})})})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"border rounded-lg",children:e.jsxs(w,{children:[e.jsx(C,{children:e.jsxs(d,{children:[e.jsx(i,{children:"#"}),e.jsx(i,{children:"Remetente"}),e.jsx(i,{children:"Destinatário"}),e.jsx(i,{children:"Operação"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Data"}),e.jsx(i,{})]})}),e.jsx(T,{children:(a==null?void 0:a.data.length)>0?(l=a==null?void 0:a.data)==null?void 0:l.map(s=>e.jsxs(d,{children:[e.jsx(r,{children:s.message_number}),e.jsx(r,{children:s.sender.name}),e.jsx(r,{children:s.recipient.name}),e.jsx(r,{children:t.user.id===s.sender_id?e.jsx(o,{variant:"secondary",className:"bg-green-500 text-white",children:"Enviada"}):e.jsx(o,{variant:"destructive",children:"Recebida"})}),e.jsx(r,{children:e.jsx(o,{variant:"default",children:Y(s.status)})}),e.jsx(r,{children:M(s.created_at).format("DD/MM/YYYY")}),e.jsxs(r,{className:"flex justify-end gap-2",children:[s.sender_id==t.user.id?e.jsx(n,{asChild:!0,size:"icon",className:"bg-orange-500 hover:bg-orange-600 text-white",children:e.jsx(c,{href:route("app.messages.edit",s.id),children:s.sender_id===t.user.id===s.status?e.jsx(x,{}):e.jsx(N,{})})}):e.jsx(O,{message:s}),e.jsx(A,{title:"esta mensagem",url:"app.messages.destroy",param:s.id})]})]},s.id)):e.jsx(d,{children:e.jsx(r,{colSpan:7,className:"h-16 w-full flex items-center justify-center",children:"Não há dados a serem mostrados no momento."})})}),e.jsx(B,{children:e.jsx(d,{children:e.jsx(r,{colSpan:7,children:e.jsx(_,{data:a})})})})]})})})]})}export{ne as default};
