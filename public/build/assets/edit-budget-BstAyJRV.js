import{r as n,u as E,j as e,H as W,L as D}from"./app-B6DbMwvR.js";import{B as P}from"./breadcrumbs-CffFO5iJ.js";import{I as z,P as V}from"./app-sidebar-header-hD17Hf5B.js";import{B as g}from"./button-B14a0A0U.js";import{A as H}from"./app-layout-BfMJj4iK.js";import{I as l}from"./input-DI4aQ8RX.js";import{L as i}from"./label-BOPT7Y3u.js";import{C as T}from"./react-select-creatable.esm-C4UN0R6M.js";import{S as $}from"./react-select.esm-BYuJT6FG.js";import{I as h}from"./input-error-DZexLMV3.js";import{e as c,d as m}from"./mask-CLJbp35z.js";import{A as G}from"./arrow-left-Dpp7zXt0.js";import{S as R}from"./save-Bbh5DzAM.js";import"./utils-CDN07tui.js";import"./chevron-right-BzBVeJ77.js";import"./createLucideIcon-CV065I_Y.js";import"./wrench-Dow5XEz3.js";import"./shopping-cart-D0Miwsk1.js";import"./file-text-trJeIL6r.js";import"./printer-BbOSjRwS.js";import"./index-F8ZBp1Px.js";import"./index-kv__sKjI.js";import"./index-Be8DDEln.js";import"./index-DFVJYggL.js";import"./tslib.es6-M_FJ09fS.js";import"./x-BCUnRCvh.js";import"./index-C7ZDpvBq.js";import"./floating-ui.dom-CT80KWrA.js";import"./index-CZCsZcNc.js";import"./badge-SlbE0R3M.js";import"./moment-BLMuvzoS.js";import"./index-kL52BVpa.js";import"./chevron-down-CpuJg0ac.js";import"./menu-034iZNhz.js";import"./book-open-oJORdiRC.js";import"./Select-ef7c0426.esm-D55CvAxH.js";const q=[{title:"Dashboard",href:route("app.dashboard")},{title:"Orçamentos",href:route("app.budgets.index")},{title:"Adicionar",href:route("app.budgets.create")}],j=[{value:"1 mese",label:"1 mês"},{value:"3 meses",label:"3 meses"},{value:"6 meses",label:"6 meses"},{value:"1 ano",label:"1 ano"}];function Me({budgets:f,budget:t}){const b=f.map(a=>({value:a,label:a})),[p,y]=n.useState(b),[_,J]=n.useState(j),N=p.find(a=>a.value===t.category)||null,C=j.find(a=>a.value===t.warranty)||null,[w,u]=n.useState(N),[S,O]=n.useState(C),{data:o,setData:r,patch:F,progress:K,processing:k,reset:Q,errors:s}=E({category:t.category,service:t.service,model:t.model,description:t.description,estimated_time:t.estimated_time,part_value:t.part_value,labor_value:t.labor_value,total_value:t.total_value,warranty:t.warranty,obs:t.obs});n.useEffect(()=>{r(a=>({...a,part_value:c(a.part_value),labor_value:c(a.labor_value),total_value:c(a.total_value)}))},[o.part_value,o.labor_value,o.total_value]);const I=a=>{a.preventDefault(),F(route("app.budgets.update",t.id))},L=a=>{u(a),r("category",a?a.value:"")},M=a=>{const d={label:a,value:a};y(B=>[...B,d]),u(d),r("category",d.value)},A=a=>{O(a),r("warranty",a?a.value:"")},v={control:(a,d)=>({...a,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:a=>({...a}),menuList:a=>({...a,fontSize:"14px"})},x="flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50";return e.jsxs(H,{children:[e.jsx(W,{title:"Mensagens"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{iconNode:V,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Orçamentos"})]}),e.jsx("div",{children:e.jsx(P,{breadcrumbs:q})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{children:e.jsx(g,{variant:"default",asChild:!0,children:e.jsxs(D,{href:route("app.budgets.index"),children:[e.jsx(G,{"h-4":!0,"w-4":!0}),e.jsx("span",{children:"Voltar"})]})})}),e.jsx("div",{})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"border rounded-lg p-2",children:e.jsxs("form",{onSubmit:I,className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"category",children:"Categoria (ou Criar Nova)"}),e.jsx(T,{id:"category",value:w,options:p,onCreateOption:M,onChange:L,isClearable:!0,placeholder:"Selecione ou digite para criar a categoria",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:v}),e.jsx(h,{className:"mt-2",message:s.category})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"service",children:"Serviço"}),e.jsx(l,{id:"service",type:"text",value:o.service,onChange:a=>r("service",a.target.value)}),s.service&&e.jsx("div",{className:"text-red-500 text-sm",children:s.service})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"model",children:"Modelo"}),e.jsx(l,{id:"model",type:"text",value:o.model,onChange:a=>r("model",a.target.value)}),s.model&&e.jsx("div",{className:"text-red-500 text-sm",children:s.model})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"part_value",children:"Valor em Peças"}),e.jsx(l,{id:"part_value",type:"text",value:m(o.part_value),onChange:a=>r("part_value",a.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"estimated_time",children:"Tempo Estimado (h)"}),e.jsx(l,{id:"estimated_time",value:o.estimated_time,onChange:a=>r("estimated_time",a.target.value)}),s.estimated_time&&e.jsx("div",{className:"text-red-500 text-sm",children:s.estimated_time})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"warranty",children:"Garantia (Meses/Ano)"}),e.jsx($,{id:"warranty",value:S,options:_,onChange:A,isClearable:!0,placeholder:"Selecione ou defina a garantia",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:v}),e.jsx(h,{className:"mt-2",message:s.warranty})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"labor_value",children:"Valor da Mão de Obra"}),e.jsx(l,{id:"labor_value",value:m(o.labor_value),onChange:a=>r("labor_value",a.target.value)}),s.labor_value&&e.jsx("div",{className:"text-red-500 text-sm",children:s.labor_value})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"total_value",children:"Valor Total"}),e.jsx(l,{id:"total_value",value:m(o.total_value),onChange:a=>r("total_value",a.target.value)}),s.total_value&&e.jsx("div",{className:"text-red-500 text-sm",children:s.total_value})]})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"description",children:"Descrição do serviço e peças utilizadas"}),e.jsx("textarea",{id:"description",rows:4,className:x,value:o.description,onChange:a=>r("description",a.target.value)}),s.description&&e.jsx("div",{className:"text-red-500 text-sm",children:s.description})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"obs",children:"Observações"}),e.jsx("textarea",{id:"obs",rows:4,className:x,value:o.obs,onChange:a=>r("obs",a.target.value)}),s.obs&&e.jsx("div",{className:"text-red-500 text-sm",children:s.obs})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(g,{type:"submit",disabled:k,children:[e.jsx(R,{}),"Salvar"]})})]})})})]})}export{Me as default};
