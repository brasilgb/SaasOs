import{r as m,u as S,j as s}from"./app-DE1SzS3A.js";import{B as o}from"./button-DRmI_54e.js";import{D as w,a as C,b as P,c as D,d as I,e as A}from"./dialog-BkuxY61g.js";import{I as M}from"./input-CS21Mrpj.js";import{L as k}from"./label-cPRnvh9u.js";import{S as T}from"./react-select.esm-DrnajY8g.js";import{d as c}from"./mask-DXHf6Xer.js";import{M as _}from"./memory-stick-DReh_msf.js";import{T as q}from"./trash-2-teR2Y3pa.js";import{W as B}from"./wrench-BUaCTFbN.js";import"./index-Dd9vimSJ.js";import"./utils-CDN07tui.js";import"./index-CirkUlPl.js";import"./index-C8pUqHRT.js";import"./index-CbiceQj8.js";import"./tslib.es6-M_FJ09fS.js";import"./x-CjzZHc-Y.js";import"./createLucideIcon-ByAkKM7B.js";import"./Select-ef7c0426.esm-YvD2oo-S.js";import"./floating-ui.dom-CT80KWrA.js";function ie({onSubmit:p,parts:l}){const[u,i]=m.useState(!1),[t,d]=m.useState([]),[F,x]=m.useState(""),h=l.map(e=>({value:e.id,label:e.name})),{data:L,setData:f,processing:g,post:z,errors:E,reset:O}=S({part_id:"",name:""}),j=e=>{e.preventDefault(),p(t),i(!1)},b=e=>{const a=parseInt(e==null?void 0:e.value);if(f("part_id",`${a}`),a){if(!t.some(r=>r.id===a)){const r=l.find(y=>y.id===a);d([...t,{...r,quantity:1}])}x("")}},N=e=>{d(t.filter(a=>a.id!==e))},v=(e,a)=>{d(t.map(n=>{if(n.id===e){const r=Math.max(1,parseInt(a)||1);return{...n,quantity:r}}return n}))};return s.jsx("div",{children:s.jsxs(w,{open:u,onOpenChange:i,children:[s.jsx(C,{asChild:!0,children:s.jsxs(o,{className:"gap-2",children:[s.jsx(_,{className:"h-4 w-4"}),"Peças"]})}),s.jsxs(P,{className:"sm:max-w-[600px]",children:[s.jsx(D,{children:s.jsx(I,{children:"Selecionar Peças"})}),s.jsxs("form",{onSubmit:j,autoComplete:"off",children:[s.jsx("div",{className:"grid gap-4 py-4",children:s.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[s.jsx(k,{htmlFor:"customer_id",children:"Peças"}),s.jsx(T,{options:h,onChange:b,placeholder:"Selecione a peça",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(e,a)=>({...e,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:e=>({...e}),menuList:e=>({...e,fontSize:"14px"})}})]})}),s.jsx("div",{className:"mb-4",children:t.map(e=>s.jsxs("div",{className:"flex justify-between items-center gap-2 p-2 border rounded",children:[s.jsx("div",{className:"text-sm w-38",children:e.name}),s.jsx(M,{type:"number",min:"1",value:e.quantity,onChange:a=>v(e.id,a.target.value),className:"w-20 mx-2 text-sm"}),s.jsx("div",{className:"text-sm w-4",children:c(e.sale_price)}),s.jsx("div",{className:"text-sm w-4",children:c(String(Number(e.sale_price)*Number(e.quantity)))}),s.jsx(o,{variant:"destructive",onClick:()=>N(e.id),className:"btn btn-danger btn-sm",children:s.jsx(q,{className:"h-4 w-4"})})]},e.id))}),s.jsxs(A,{className:"gap-2",children:[s.jsx(o,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancelar"}),s.jsxs(o,{type:"submit",disabled:g,children:[s.jsx(B,{className:"h-4 w-4"}),"Inserir na ordem"]})]})]})]})]})})}export{ie as default};
