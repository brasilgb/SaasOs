import{u as p,j as e,bH as u,r as m,H as f,a4 as g,l as b}from"./vendor-9cxgAHzg.js";import{B as v}from"./breadcrumbs-Bxu_pr7n.js";import{I as N}from"./app-sidebar-header-BYkhpJ-r.js";import{A as C}from"./app-layout-r2ePAL2A.js";import{h as D}from"./moment-BLMuvzoS.js";import{T as A,a as S,b as n,c as t,d as w,e as r,f as y}from"./table-wiBNsqwM.js";import{a as B,b as T,c as I,d as H,e as V,f as E,g as M,h as k,i as F,I as R,A as Y}from"./app-pagination-C96396Mq.js";import{B as x}from"./button-DFigV1aq.js";import _ from"./app-sale-details-modal-CFUMnf4B.js";import{B as O}from"./badge-Y4wF56ht.js";import"./utils-veIRhKZd.js";import"./mask-Dzd4Hpc-.js";import"./index-C6x6Dy02.js";import"./app-C8FzdgDA.js";import"./input-D2aH1Wd-.js";import"./dialog-CDKjSUwF.js";function z({saleId:s}){const{post:i,processing:l}=p(),o=()=>{i(route("app.sales.cancel",s),{preserveScroll:!0})};return e.jsxs(B,{children:[e.jsx(T,{asChild:!0,children:e.jsx(x,{variant:"destructive",size:"icon",title:"Cancelar Venda",children:e.jsx(u,{className:"h-4 w-4"})})}),e.jsxs(I,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Cancelar venda?"}),e.jsx(E,{children:"Esta ação irá cancelar a venda e devolver os itens ao estoque. Essa operação não poderá ser desfeita."})]}),e.jsxs(M,{children:[e.jsx(k,{children:"Voltar"}),e.jsx(F,{onClick:o,disabled:l,className:"bg-red-600 hover:bg-red-700",children:"Confirmar Cancelamento"})]})]})]})}const L=[{title:"Dashboard",href:route("app.dashboard")},{title:"Vendas",href:"#"}];function le({sales:s}){var c;const[i,l]=m.useState(!1),[o,h]=m.useState(null),j=a=>{h(a),l(!0)};return e.jsxs(C,{children:[e.jsx(_,{isOpen:i,onClose:()=>l(!1),sale:o}),e.jsx(f,{title:"Vendas"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{iconNode:g,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Vendas"})]}),e.jsx("div",{children:e.jsx(v,{breadcrumbs:L})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{className:"w-full",children:e.jsx(R,{placeholder:"Buscar vendas por número e cliente",url:"app.sales.index"})}),e.jsx("div",{className:"w-full flex justify-end"})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"border rounded-lg",children:e.jsxs(A,{children:[e.jsx(S,{children:e.jsxs(n,{children:[e.jsx(t,{children:"#"}),e.jsx(t,{children:"Cliente"}),e.jsx(t,{children:"Total"}),e.jsx(t,{children:"Data venda"}),e.jsx(t,{})]})}),e.jsx(w,{children:(s==null?void 0:s.data.length)>0?(c=s==null?void 0:s.data)==null?void 0:c.map(a=>{var d;return e.jsxs(n,{children:[e.jsx(r,{children:a.sales_number}),e.jsx(r,{children:((d=a.customer)==null?void 0:d.name)||"Cliente não informado"}),e.jsx(r,{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a.total_amount)}),e.jsx(r,{children:D(a.created_at).format("DD/MM/YYYY")}),e.jsxs(r,{className:"flex justify-end gap-2",children:[a.status==="completed"&&e.jsx(z,{saleId:a.id}),a.status==="cancelled"&&e.jsx(O,{variant:"destructive",children:"Cancelada"}),e.jsx(x,{onClick:()=>j(a),size:"icon",className:"bg-orange-500 hover:bg-orange-600 text-white",children:e.jsx(b,{className:"h-4 w-4"})})]})]},a.id)}):e.jsx(n,{children:e.jsx(r,{colSpan:5,className:"h-16 w-full flex items-center justify-center",children:"Não há dados a serem mostrados no momento."})})}),e.jsx(y,{children:e.jsx(n,{children:e.jsx(r,{colSpan:5,children:e.jsx(Y,{data:s})})})})]})})})]})}export{le as default};
