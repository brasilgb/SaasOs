import{a as D,r as n,u as P,j as e,H as z,L as V}from"./app-DCKq3iYY.js";import{B as T}from"./breadcrumbs-pusDlTPe.js";import{I as H,P as G}from"./app-sidebar-header-BCjRkLxe.js";import{B as b}from"./button-C1BBNDVX.js";import{A as R}from"./app-layout-DrErM7-l.js";import{I as c}from"./input-CGR9Yln-.js";import{L as l}from"./label-EGA6OZFX.js";import{C as j}from"./react-select-creatable.esm-BO8kRrT0.js";import{I as i}from"./input-error-BRsl8TBx.js";import{u as y,d,e as p}from"./mask-DXHf6Xer.js";import{A as $}from"./arrow-left-SIYjMzOJ.js";import{c as q}from"./createLucideIcon-q2T83F1J.js";import{S as J}from"./save-CDdXkSQs.js";import"./utils-CDN07tui.js";import"./chevron-right-CmOuw9fw.js";import"./wrench-DvmlS1xt.js";import"./shopping-cart-BQvTW_kC.js";import"./memory-stick-CNPSvN4B.js";import"./file-text-CPWno4V7.js";import"./printer-8oLpmT4U.js";import"./index-BTj-j31p.js";import"./index-D2eXF7-R.js";import"./index-8wtZ7S_H.js";import"./index-BvHZmlTt.js";import"./tslib.es6-M_FJ09fS.js";import"./x-DbwsEGHv.js";import"./index-CKeWYSvF.js";import"./floating-ui.dom-CT80KWrA.js";import"./index-BtXN1QPO.js";import"./badge-1Bxq3e_Z.js";import"./moment-BLMuvzoS.js";import"./index-Bveb4-Jp.js";import"./chevron-down-CU1FIzeo.js";import"./menu-qMVMnzZe.js";import"./book-open-B5N_Qza_.js";import"./Select-ef7c0426.esm-PcjsHCWc.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Q=q("calculator",K),U=[{title:"Dashboard",href:route("app.dashboard")},{title:"Orçamentos",href:route("app.budgets.index")},{title:"Adicionar",href:route("app.budgets.create")}],X=[{value:"1 meses",label:"1 mês"},{value:"3 meses",label:"3 meses"},{value:"6 meses",label:"6 meses"},{value:"1 ano",label:"1 ano"}];function We({budgets:f}){const{auth:Y}=D().props,_=f.map(a=>({value:a,label:a})),[N,C]=n.useState(_),[w,g]=n.useState(null),[k,S]=n.useState(X),[M,v]=n.useState(null),{data:s,setData:t,post:O,progress:Z,processing:F,reset:I,errors:r}=P({category:"",service:"",model:"",description:"",estimated_time:"",part_value:"",labor_value:"",total_value:"",warranty:"",obs:""}),u=n.useCallback(()=>{const a=parseFloat(y(s.part_value))||0,o=parseFloat(y(s.labor_value))||0,m=a+o;t("total_value",d(String(m)))},[s.part_value,s.labor_value,t]);n.useEffect(()=>{(s.part_value||s.labor_value)&&u()},[s.part_value,s.labor_value,u]),n.useEffect(()=>{t(a=>({...a,part_value:p(a.part_value),labor_value:p(a.labor_value),total_value:p(a.total_value)}))},[s.part_value,s.labor_value,s.total_value]);const L=a=>{a.preventDefault(),O(route("app.budgets.store"),{onSuccess:()=>I()})},A=a=>{g(a),t("category",a?a.value:"")},B=a=>{const o={label:a,value:a};C(m=>[...m,o]),g(o),t("category",o.value)},E=a=>{v(a),t("warranty",a?a.value:"")},W=a=>{const o={label:a,value:a};S(m=>[...m,o]),v(o),t("warranty",o.value)},h={control:(a,o)=>({...a,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:a=>({...a}),menuList:a=>({...a,fontSize:"14px"})},x="flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50";return e.jsxs(R,{children:[e.jsx(z,{title:"Mensagens"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{iconNode:G,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Orçamentos"})]}),e.jsx("div",{children:e.jsx(T,{breadcrumbs:U})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{children:e.jsx(b,{variant:"default",asChild:!0,children:e.jsxs(V,{href:route("app.budgets.index"),children:[e.jsx($,{"h-4":!0,"w-4":!0}),e.jsx("span",{children:"Voltar"})]})})}),e.jsx("div",{})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"border rounded-lg p-2",children:e.jsxs("form",{onSubmit:L,className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"category",children:"Categoria (ou Criar Nova)"}),e.jsx(j,{id:"category",value:w,options:N,onCreateOption:B,onChange:A,isClearable:!0,placeholder:"Selecione ou digite para criar a categoria",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:h}),e.jsx(i,{className:"mt-2",message:r.category})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"service",children:"Serviço"}),e.jsx(c,{id:"service",type:"text",value:s.service,onChange:a=>t("service",a.target.value)}),e.jsx(i,{className:"mt-2",message:r.service})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"model",children:"Modelo"}),e.jsx(c,{id:"model",type:"text",value:s.model,onChange:a=>t("model",a.target.value)}),e.jsx(i,{className:"mt-2",message:r.model})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"part_value",children:"Valor em Peças"}),e.jsx(c,{id:"part_value",type:"text",value:d(s.part_value),onChange:a=>t("part_value",d(a.target.value))}),e.jsx(i,{className:"mt-2",message:r.part_value})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"estimated_time",children:"Tempo Estimado (h)"}),e.jsx(c,{id:"estimated_time",value:s.estimated_time,onChange:a=>t("estimated_time",a.target.value)}),e.jsx(i,{className:"mt-2",message:r.estimated_time})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"warranty",children:"Garantia (Meses/Ano)"}),e.jsx(j,{id:"warranty",value:M,options:k,onCreateOption:W,onChange:E,isClearable:!0,placeholder:"Selecione ou defina a garantia",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:h}),e.jsx(i,{className:"mt-2",message:r.warranty})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"labor_value",children:"Valor da Mão de Obra"}),e.jsx(c,{id:"labor_value",value:d(s.labor_value),onChange:a=>t("labor_value",d(a.target.value))}),e.jsx(i,{className:"mt-2",message:r.labor_value})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"total_value",children:"Valor Total"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{id:"total_value",value:d(s.total_value),onChange:a=>t("total_value",d(a.target.value)),className:"pr-10"}),e.jsx("button",{type:"button",onClick:u,className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx(Q,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx(i,{className:"mt-2",message:r.total_value})]})]}),e.jsxs("div",{className:"grid md:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"description",children:"Descrição do serviço e peças utilizadas"}),e.jsx("textarea",{id:"description",rows:4,className:x,value:s.description,onChange:a=>t("description",a.target.value)}),e.jsx(i,{className:"mt-2",message:r.description})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"obs",children:"Observações"}),e.jsx("textarea",{id:"obs",rows:4,className:x,value:s.obs,onChange:a=>t("obs",a.target.value)}),e.jsx(i,{className:"mt-2",message:r.obs})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(b,{type:"submit",disabled:F,children:[e.jsx(J,{}),"Salvar"]})})]})})})]})}export{We as default};
