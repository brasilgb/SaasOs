import{f as S,u as N,j as s,S as y,b as _}from"./vendor-BCaUCftH.js";import{B as C}from"./button-DiBFJldJ.js";import{I as l}from"./input-DCG2Keqb.js";import{L as t}from"./label-BubkbjOL.js";import{T as F}from"./textarea-CBI8EznV.js";import{I as M}from"./input-error-CV3kyxAQ.js";import{S as I}from"./switch-zSM6RWix.js";import{t as p}from"./app-toast-messages-DVr4v3Cj.js";import"./utils-DxAEgwAc.js";import"./index-D1e0gAKB.js";function q({users:g,initialData:r}){const{auth:m}=S().props,n=!!r,u=!n||(r==null?void 0:r.sender_id)===m.user.id,c=g.map(e=>({value:e.id,label:e.name})),{data:a,setData:o,post:x,patch:h,progress:w,processing:f,reset:j,errors:d}=N({sender_id:m.user.id??"",recipient_id:(r==null?void 0:r.recipient_id)??"",title:(r==null?void 0:r.title)??"",message:(r==null?void 0:r.message)??"",status:(r==null?void 0:r.status)??!1}),v=e=>{e.preventDefault(),n?h(route("app.messages.update",r.id),{onSuccess:()=>{p("Sucesso","Mensagem atualizada com sucesso")}}):x(route("app.messages.store"),{onSuccess:()=>{p("Sucesso","Mensagem criado com sucesso"),j()}})},b=e=>{o("recipient_id",e==null?void 0:e.value)},i=c==null?void 0:c.filter(e=>e.value==(r==null?void 0:r.recipient_id)).map(e=>({value:e.label,label:e.label}));return s.jsxs("form",{onSubmit:v,autoComplete:"off",className:"space-y-8",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(t,{htmlFor:"send_id",children:"Remetente"}),s.jsx(l,{value:m.user.name,readOnly:!0,type:"text",id:"sender",onChange:e=>o("sender_id",e.target.value)})]}),s.jsxs("div",{className:" grid gap-2",children:[s.jsx(t,{htmlFor:"recipient_id",children:"Para"}),s.jsx(y,{isDisabled:!u,menuPosition:"fixed",defaultValue:i,options:c,onChange:b,placeholder:"Selecione o recebedor",className:"shadow-xs p-0 border text-gray-700 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-9",styles:{control:(e,E)=>({...e,fontSize:"14px",boxShadow:"none",border:"none",background:"transparent",paddingBottom:"2px"}),dropdownIndicator:e=>({...e}),menuList:e=>({...e,fontSize:"14px"})}}),s.jsx(M,{className:"mt-2",message:d.recipient_id})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(t,{htmlFor:"service",children:"TÃ­tulo"}),s.jsx(l,{readOnly:!u,id:"title",type:"text",value:a.title,onChange:e=>o("title",e.target.value)}),d.title&&s.jsx("div",{className:"text-red-500 text-sm",children:d.title})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(t,{htmlFor:"message",children:"Mensagem"}),s.jsx(F,{readOnly:!u,id:"message",value:a.message,onChange:e=>o("message",e.target.value)}),d.message&&s.jsx("div",{className:"text-red-500 text-sm",children:d.message})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(t,{htmlFor:"status",children:"Status de leitura"}),s.jsx(I,{disabled:!n,id:"status",checked:a.status,onCheckedChange:e=>o("status",e)})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(C,{type:"submit",disabled:f,children:[s.jsx(_,{}),"Salvar"]})})]})}export{q as default};
