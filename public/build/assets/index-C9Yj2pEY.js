import{r as s,i as n,j as e,H as g,L as h}from"./vendor-DAFaRPSW.js";import{A as b}from"./app-layout-CeAthm3T.js";import{D as f,b as j,c as y,d as v}from"./dialog-DstWkYOv.js";import"./app-sidebar-header-CbWXSYeM.js";import"./button-BLBZ8SJO.js";import"./utils-Cs9_lP8d.js";import"./badge-BDr36KjN.js";import"./mask-Dzd4Hpc-.js";import"./moment-BLMuvzoS.js";import"./alert-gjt2YxK7.js";import"./index-ZCiqZKNU.js";import"./app-CYt1etfP.js";function I(l){const{requires_plan:c,plans:m=[],qr_code_base64:o,qr_code:r,payment_id:t}=l,[i,d]=s.useState(!1),[x]=s.useState(!!t),p=()=>{r&&(navigator.clipboard.writeText(r),d(!0),setTimeout(()=>d(!1),2500))},u=a=>{n.post(route("payment.select-plan"),{plan_id:a,source:"pay-in-advance"})};return s.useEffect(()=>{if(!t)return;const a=setInterval(async()=>{try{(await(await fetch(route("payment.status",t))).json()).paid&&(clearInterval(a),n.visit("/app"))}catch{}},5e3);return()=>clearInterval(a)},[t]),e.jsxs(b,{children:[e.jsx(g,{title:"Adiantar Pagamento"}),e.jsx(f,{open:c,children:e.jsxs(j,{className:"max-w-3xl",showCloseButton:!1,children:[e.jsx(y,{children:e.jsx(v,{className:"text-2xl font-bold text-center mb-6",children:"Escolha um plano para continuar"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.map(a=>e.jsxs("div",{className:"border border-gray-200 dark:border-zinc-700 rounded-lg p-6 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:a.name}),e.jsxs("p",{className:"text-2xl font-bold mt-4",children:["R$ ",Number(a.value).toFixed(2)]})]}),e.jsx("button",{onClick:()=>u(a.id),className:"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded transition",children:"Selecionar plano"})]},a.id))})]})}),e.jsxs("div",{className:"max-w-md w-full mx-auto bg-white dark:bg-zinc-800 p-8 rounded-lg shadow text-center text-gray-900 dark:text-gray-100",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Adiantar Pagamento"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Realize o pagamento via Pix para adiantar uma mensalidade."}),e.jsx("div",{className:"flex justify-center mb-6 border-2 border-dashed border-gray-300 dark:border-zinc-600 rounded p-4",children:o?e.jsx("img",{src:`data:image/png;base64,${o}`,className:"w-48 h-48 bg-white p-2 rounded",alt:"QR Code Pix"}):e.jsx("div",{className:"w-48 h-48 flex items-center justify-center text-gray-400 dark:text-gray-500",children:"Gerando QR Code..."})}),e.jsx("button",{onClick:p,disabled:!r,className:`w-full py-3 rounded text-white transition
                        ${i?"bg-green-600":"bg-blue-600 hover:bg-blue-700"}`,children:i?"Código Pix copiado!":"Copiar código Pix"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"A liberação é automática após a confirmação do pagamento."}),x&&e.jsx("p",{className:"text-xs text-blue-600 mt-3",children:"Verificando pagamento automaticamente..."}),e.jsx("div",{className:"mt-6 border-t border-gray-200 dark:border-zinc-700 pt-4",children:e.jsx(h,{href:route("app.dashboard"),className:"text-sm text-gray-500 dark:text-gray-400 hover:underline",children:"Voltar para o dashboard"})})]})]})}export{I as default};
