import{r as v,v as V,j as e}from"./app-DJcIIdws.js";import{B as n}from"./button-D-SLNlPY.js";import{D as w,a as F,b as $,c as M,d as T,e as q}from"./dialog-Dk-zMYtQ.js";import{I as B}from"./input-CRwaLmM3.js";import{L as o}from"./label-BQWoq0jC.js";import{S as d,a as m,b as t,c as p,d as x,e as h}from"./select-DUrhk24M.js";import{T as E}from"./textarea-CrfNYv9H.js";import{d as k,e as I}from"./mask-B61Tbbsk.js";import{P as O}from"./pencil-D5VeoxOR.js";import{S as L}from"./save-BOZ0nRkt.js";import"./utils-D-KgF5mV.js";import"./index-BS6dE_Ff.js";import"./index-IZ9EXHte.js";import"./index-CSoJ7ipB.js";import"./tslib.es6-M_FJ09fS.js";import"./x-J9y_9Iq8.js";import"./createLucideIcon-4rlIGkZ1.js";import"./index-DQL7OhUE.js";import"./floating-ui.utils.dom-sMmpZ9NL.js";import"./index-CSfd7REK.js";import"./index-C-LO_fAf.js";import"./chevron-down-DNDjIRE0.js";import"./check-B7OQzYx6.js";function ne({budget:a,brands:j,models:u,services:f}){const[N,c]=v.useState(!1),{data:i,setData:l,processing:S,patch:g,errors:r}=V({brand_id:a==null?void 0:a.brand_id,eqmodel_id:a==null?void 0:a.eqmodel_id,service_id:a==null?void 0:a.service_id,description:a==null?void 0:a.description,value:a==null?void 0:a.value}),_=s=>{s.preventDefault(),g(route("app.register-budgets.update",a==null?void 0:a.id),{onSuccess:()=>{c(!1)}})},C=j.map(s=>({value:s.id,label:s.brand})),D=u.map(s=>({value:s.id,label:s.model})),y=f.map(s=>({value:s.id,label:s.service}));return v.useEffect(()=>{l(s=>({...s,value:k(s==null?void 0:s.value)}))},[i==null?void 0:i.value]),e.jsx("div",{children:e.jsxs(w,{open:N,onOpenChange:c,children:[e.jsx(F,{asChild:!0,children:e.jsx(n,{size:"icon",className:"bg-orange-500 hover:bg-orange-600 text-white",children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsxs($,{className:"sm:max-w-[500px]",children:[e.jsx(M,{children:e.jsx(T,{children:"Cadastrar Orçamento"})}),e.jsxs("form",{onSubmit:_,autoComplete:"off",children:[e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"customer_id",children:"Serviço *"}),e.jsxs(d,{onValueChange:s=>l("service_id",s),defaultValue:`${i.service_id}`,children:[e.jsx(m,{className:"w-full",children:e.jsx(t,{placeholder:"Selecione o serviço"})}),e.jsx(p,{children:e.jsx(x,{children:y.map(s=>e.jsx(h,{value:`${s.value}`,children:s.label},s.value))})})]}),r.service_id&&e.jsx("div",{className:"text-red-500 text-sm",children:r.service_id})]})}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"customer_id",children:"Marca"}),e.jsxs(d,{onValueChange:s=>l("brand_id",s),defaultValue:`${i.brand_id}`,children:[e.jsx(m,{className:"w-full",children:e.jsx(t,{placeholder:"Selecione a marca"})}),e.jsx(p,{children:e.jsx(x,{children:C.map(s=>e.jsx(h,{value:`${s.value}`,children:s.label},s.value))})})]})]})}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"customer_id",children:"Modelo"}),e.jsxs(d,{onValueChange:s=>l("eqmodel_id",s),defaultValue:`${i.eqmodel_id}`,children:[e.jsx(m,{className:"w-full",children:e.jsx(t,{placeholder:"Selecione o modelo"})}),e.jsx(p,{children:e.jsx(x,{children:D.map(s=>e.jsx(h,{value:`${s.value}`,children:s.label},s.value))})})]})]})}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"description",children:"Descrição *"}),e.jsx(E,{id:"description",value:i.description,onChange:s=>l("description",s.target.value)}),r.description&&e.jsx("div",{className:"text-red-500 text-sm",children:r.description})]})}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"value",children:"Valor *"}),e.jsx(B,{id:"value",value:I(i.value),onChange:s=>l("value",s.target.value)}),r.value&&e.jsx("div",{className:"text-red-500 text-sm",children:r.value})]})}),e.jsxs(q,{className:"gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),e.jsxs(n,{type:"submit",disabled:S,children:[e.jsx(L,{}),"Salvar"]})]})]})]})]})})}export{ne as default};
