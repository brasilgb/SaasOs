import{r as u,j as o,ba as n,a6 as a,i as x,t as h}from"./vendor-BCaUCftH.js";import{B as j}from"./button-DiBFJldJ.js";import{h as e}from"./moment-BLMuvzoS.js";import D from"./SchedulesReportPDF-Cwgkzvz4.js";import"./utils-DxAEgwAc.js";import"./pt-br-DYu2O2EU.js";function y({dateRange:r}){const[t,i]=u.useState(!1);async function c(){!(r!=null&&r.from)||!(r!=null&&r.to)||(i(!0),x.post(route("app.reports.store"),{type:"schedules",from:e(r.from).format("YYYY-MM-DD"),to:e(r.to).format("YYYY-MM-DD")},{preserveState:!1,preserveScroll:!0,onSuccess:async s=>{var l;const m=((l=s.props)==null?void 0:l.reportData)||[],p=await h(o.jsx(D,{data:m,dateRange:r})).toBlob(),f=URL.createObjectURL(p);window.open(f,"_blank")},onError:s=>{console.error("Erro ao gerar relatÃ³rio:",s)},onFinish:()=>i(!1)}))}return o.jsx("div",{className:"flex justify-center mt-4",children:o.jsx(j,{onClick:c,disabled:t||!(r!=null&&r.from)||!(r!=null&&r.to),className:"w-full sm:w-auto",children:t?o.jsxs(o.Fragment,{children:[o.jsx(n,{className:"mr-2 size-4 animate-spin"}),"Gerando PDF..."]}):o.jsxs(o.Fragment,{children:[o.jsx(a,{className:"mr-2 size-4"}),"Agendamentos de visitas"]})})})}export{y as default};
