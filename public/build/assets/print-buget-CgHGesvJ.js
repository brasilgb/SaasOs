import{j as e,D as I,p as S,q as C,V as s,T as o,I as N,r as O,s as P,t as E,v as V}from"./vendor-ksci8XOx.js";import{h as z}from"./moment-BLMuvzoS.js";import{B as R}from"./button-DHWtkJpJ.js";import"./utils-DYvR5uu3.js";const h=r=>{const l=parseFloat(r);return isNaN(l)?"R$ 0,00":`R$ ${l.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")}`},t=C.create({page:{padding:30,fontFamily:"Helvetica",fontSize:10,lineHeight:1.5},headerSection:{marginBottom:20,paddingBottom:10,borderBottomWidth:1,borderBottomColor:"#333",borderBottomStyle:"solid",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},companyInfo:{width:"75%"},companyName:{fontSize:18,fontWeight:"bold",paddingBottom:10,color:"#003366"},companyDetails:{fontSize:9,color:"#555"},logoPlaceholder:{width:60,height:60,justifyContent:"center",alignItems:"center"},budgetTitle:{fontSize:14,fontWeight:"bold",marginBottom:15,textAlign:"center",textDecoration:"underline",color:"#333"},sectionContainer:{marginBottom:15,padding:5,backgroundColor:"#f9f9f9",border:"1px solid #ddd",borderRadius:2},sectionTitle:{fontSize:12,fontWeight:"bold",marginBottom:8,color:"#333",paddingBottom:2,borderBottom:"1px solid #eee"},row:{flexDirection:"row",marginBottom:5,justifyContent:"space-between"},column:{width:"48%"},detailItem:{flexDirection:"row",justifyContent:"space-start",paddingVertical:2},label:{fontWeight:"bold",color:"#555"},value:{marginLeft:5,color:"#000"},obsBox:{marginTop:10,border:"1px solid #ccc",padding:8,minHeight:60},totalGeral:{fontSize:14,fontWeight:"bold",color:"#A50000",marginTop:10,paddingTop:5,borderTop:"1px solid #333",textAlign:"right"}}),A=({company:r,budget:l})=>{const{companyname:n,cnpj:i,city:d,number:a,street:c,district:m,telephone:y,logo:j}=r,{service:p,description:g,estimated_time:u,part_value:f,labor_value:b,total_value:v,warranty:x,validity:B,created_at:D,obs:T}=l,w=T||"Nenhuma observação informada.";return e.jsx(I,{children:e.jsxs(S,{size:"A4",style:t.page,children:[e.jsxs(s,{style:t.headerSection,fixed:!0,children:[e.jsxs(s,{style:t.companyInfo,children:[e.jsx(o,{style:t.companyName,children:n}),e.jsxs(o,{style:t.companyDetails,children:["CNPJ: ",i]}),e.jsxs(o,{style:t.companyDetails,children:["Tel: ",y]}),e.jsxs(o,{style:t.companyDetails,children:[c,", ",a," - ",m,", ",d]})]}),e.jsx(s,{style:t.logoPlaceholder,children:e.jsx(N,{source:`/storage/logos/${j}`})})]}),e.jsx(o,{style:t.budgetTitle,children:"DETALHES DO ORÇAMENTO DE SERVIÇO"}),e.jsxs(s,{style:t.sectionContainer,children:[e.jsx(o,{style:t.sectionTitle,children:"Serviço Orçado"}),e.jsxs(s,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Nome do Serviço:"}),e.jsx(o,{style:t.value,children:p})]}),e.jsxs(s,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Descrição:"}),e.jsx(o,{style:t.value,children:g})]}),e.jsxs(s,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Tempo Estimado(Hs):"}),e.jsxs(o,{style:t.value,children:[u," Hs"]})]})]}),e.jsxs(s,{style:t.sectionContainer,children:[e.jsx(o,{style:t.sectionTitle,children:"Valores e Condições"}),e.jsxs(s,{style:t.row,children:[e.jsxs(s,{style:t.column,children:[e.jsxs(s,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Valor Mão de Obra:"}),e.jsx(o,{style:t.value,children:h(b)})]}),e.jsxs(s,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Valor Peças:"}),e.jsx(o,{style:t.value,children:h(f)})]})]}),e.jsxs(s,{style:t.column,children:[e.jsxs(s,{style:t.detailItem,children:[e.jsx(o,{style:t.label,children:"Garantia:"}),e.jsxs(o,{style:t.value,children:[x," ",x===1?"mês":"meses"]})]}),e.jsxs(s,{style:[t.detailItem,t.totalGeral],children:[e.jsx(o,{children:"TOTAL GERAL:"}),e.jsx(o,{children:h(v)})]})]})]})]}),e.jsxs(s,{style:t.obsBox,children:[e.jsx(o,{style:{fontWeight:"bold",marginBottom:5},children:"Observações:"}),e.jsx(o,{children:w})]}),e.jsx(s,{style:{paddingVertical:5},children:e.jsxs(o,{style:{fontSize:8},children:["Orçamento gerado em ",z(D).format("DD/MM/YYYY"),", este orçamento é válido por ",B," dias."]})})]})})};function _({company:r,budget:l}){const[n,i]=O.useState(!1),d=async()=>{i(!0);try{const c=await V(e.jsx(A,{company:r,budget:l})).toBlob(),m=URL.createObjectURL(c);window.open(m,"_blank")}catch(a){console.error("Erro ao gerar ou abrir o PDF:",a),alert("Houve um erro ao gerar o PDF. Tente novamente.")}finally{i(!1)}};return e.jsx("div",{className:"print-budget-container",children:e.jsxs(R,{onClick:d,disabled:n||!r||!l,title:!r||!l?"Dados do orçamento ausentes":"Visualizar Orçamento",children:[n?e.jsx(P,{className:"w-4 h-4 animate-spin"}):e.jsx(E,{className:"w-4 h-4"}),"Gerar"]})})}export{_ as PrintBudget};
