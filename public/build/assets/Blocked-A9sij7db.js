import{r,b as d,j as e,H as p,d as b}from"./vendor-ksci8XOx.js";function v({plans:m,tenant:x}){const[a,u]=r.useState(null),[o,n]=r.useState(!1),[t,i]=r.useState(null),[g,l]=r.useState(!1);r.useEffect(()=>{let s=null;return t&&!g&&(l(!0),s=setInterval(async()=>{try{(await d.get(route("subscription.check_status"))).data.status==="active"&&(clearInterval(s),alert("Pagamento confirmado! Redirecionando..."),window.location.href=route("dashboard"))}catch(c){console.error("Erro ao verificar status do pagamento",c)}},5e3)),()=>{s&&clearInterval(s)}},[t]);const h=async()=>{if(a){n(!0);try{const s=await d.post(route("subscription.pay"),{plan_id:a});i(s.data),l(!0),console.log(s)}catch(s){alert("Erro ao gerar pagamento. Tente novamente."),console.log(s)}finally{n(!1)}}},f=s=>{s.preventDefault(),b.post(route("logout"))};return e.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsx(p,{title:"Acesso Bloqueado"}),t&&e.jsxs("div",{className:"mt-4 flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center text-blue-600 animate-pulse",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm font-medium",children:"Aguardando confirmação do banco..."})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 italic",children:"Não é necessário enviar o comprovante, a liberação é automática."})]}),e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Acesso Suspenso"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Olá, ",e.jsx("span",{className:"font-bold",children:x.name}),". Identificamos pendências financeiras. Para reativar seu acesso instantaneamente, escolha um plano abaixo."]})]}),e.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-lg",children:[e.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:t?e.jsxs("div",{className:"text-center animate-fade-in-up",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-4 mb-4",children:[e.jsx("p",{className:"text-green-800 font-medium",children:"Cobrança gerada com sucesso!"}),e.jsx("p",{className:"text-green-600 text-sm",children:"Aguardando confirmação automática..."})]}),e.jsx("img",{src:`data:image/png;base64,${t.qr_code}`,alt:"QR Code",className:"mx-auto w-64 h-64 border p-2 rounded"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Copia e Cola"}),e.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[e.jsx("input",{type:"text",readOnly:!0,value:t.qr_code_copy_paste,className:"focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-l-md sm:text-xs border-gray-300 bg-gray-50 p-2"}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.qr_code_copy_paste),alert("Código copiado!")},className:"-ml-px relative inline-flex items-center space-x-2 px-4 py-2 border border-gray-300 text-sm font-medium rounded-r-md text-gray-700 bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:e.jsx("span",{children:"Copiar"})})]})]}),e.jsxs("div",{className:"mt-6 flex justify-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-indigo-600 mr-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-gray-500 text-sm",children:"Verificando pagamento..."})]}),e.jsx("button",{onClick:()=>i(null),className:"mt-4 text-xs text-gray-400 hover:text-gray-600 underline",children:"Escolher outro plano"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione uma opção de renovação:"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:m.map(s=>e.jsxs("div",{onClick:()=>u(s.id),className:`relative rounded-lg border p-4 shadow-sm flex cursor-pointer focus:outline-none 
                                            ${a===s.id?"ring-2 ring-indigo-500 border-transparent bg-indigo-50":"border-gray-300 bg-white hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex-1 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm font-medium text-gray-900",children:s.name}),e.jsx("span",{className:"block text-sm text-gray-500",children:s.description})]}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:["R$ ",s.value]})]}),a===s.id&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-indigo-600 rounded-full p-1",children:e.jsx("svg",{className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]},s.id))}),e.jsx("button",{onClick:h,disabled:!a||o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 mt-6",children:o?"Gerando Cobrança...":"Gerar QR Code PIX"})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("form",{onSubmit:f,children:e.jsx("button",{type:"submit",className:"text-sm text-gray-500 hover:text-gray-900 font-medium underline",children:"Sair da conta"})})})]})]})}export{v as default};
