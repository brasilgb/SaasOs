import{f as g,u as p,j as e,H as j,ab as u,b as v,i as N}from"./vendor-DAFaRPSW.js";import{I as f,B as b}from"./icon-DOHSz65M.js";import{B as C}from"./button-BLBZ8SJO.js";import{A as F}from"./app-layout-SHvC0AJY.js";import{I as i}from"./input-BrTaTwB9.js";import{L as l}from"./label-yfcR71X1.js";import{f as w,b as _,a as z,u as S}from"./mask-Dzd4Hpc-.js";import{a as L,t as D}from"./app-toast-messages-Cbo9wlVU.js";import"./utils-Cs9_lP8d.js";import"./app-sidebar-header-CbWXSYeM.js";import"./badge-BDr36KjN.js";import"./moment-BLMuvzoS.js";import"./dialog-DstWkYOv.js";import"./alert-gjt2YxK7.js";import"./index-ZCiqZKNU.js";import"./app-Bsfd1exF.js";const B=[{title:"Dashboard",href:route("app.dashboard")},{title:"Dados da empresa",href:"#"}];function X({company:s}){const{flash:k}=g().props,{data:a,setData:r,patch:E,progress:I,processing:m,errors:d}=p({shortname:s==null?void 0:s.shortname,companyname:s==null?void 0:s.companyname,cnpj:s==null?void 0:s.cnpj,logo:null,zip_code:s==null?void 0:s.zip_code,state:s==null?void 0:s.state,city:s==null?void 0:s.city,district:s==null?void 0:s.district,street:s==null?void 0:s.street,number:s==null?void 0:s.number,complement:s==null?void 0:s.complement,telephone:s==null?void 0:s.telephone,whatsapp:s==null?void 0:s.whatsapp,site:s==null?void 0:s.site,email:s==null?void 0:s.email}),c=t=>{t.preventDefault(),N.post(route("app.company.update",s.id),{_method:"put",shortname:a.shortname,companyname:a.companyname,cnpj:a.cnpj,logo:a.logo,zip_code:a.zip_code,state:a.state,city:a.city,district:a.district,street:a.street,number:a.number,complement:a.complement,telephone:a.telephone,whatsapp:a.whatsapp,site:a.site,email:a.email},{preserveScroll:!0,onSuccess:()=>{D("Sucesso","Dados da empresa ajustados com sucesso")},onError:h=>{L("Erro ao validar:",h)}})},x=t=>{const h=S(t);fetch(`https://viacep.com.br/ws/${h}/json/`).then(o=>o.json()).then(o=>{r(n=>({...n,state:o.uf})),r(n=>({...n,city:o.localidade})),r(n=>({...n,district:o.bairro})),r(n=>({...n,street:o.logradouro})),r(n=>({...n,complement:o.complemento}))}).catch(o=>console.error(o))};return e.jsxs(F,{children:[e.jsx(j,{title:"Dados da empresa"}),e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{iconNode:u,className:"w-8 h-8"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Dados da empresa"})]}),e.jsx("div",{children:e.jsx(b,{breadcrumbs:B})})]}),e.jsx("div",{className:"flex items-center justify-between p-4",children:e.jsx("div",{})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"border rounded-lg p-2",children:[e.jsx("div",{className:"w-24 my-10",children:e.jsx("img",{src:`/storage/logos/${s.logo?s.logo:"default.png"}`,alt:"Imagem de logo"})}),e.jsxs("form",{onSubmit:c,autoComplete:"off",className:"space-y-8",children:[e.jsxs("div",{className:"grid md:grid-cols-6 gap-4 mt-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"logo",children:"Logotipo"}),e.jsx(i,{type:"file",id:"logo",onChange:t=>r("logo",t.target.files[0])}),d.logo&&e.jsx("div",{className:"text-red-500 text-sm",children:d.logo})]}),e.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[e.jsx(l,{htmlFor:"name",children:"CPF/CNPJ"}),e.jsx(i,{type:"text",id:"cnpj",value:w(a.cnpj),onChange:t=>r("cnpj",t.target.value),maxLength:18}),d.cnpj&&e.jsx("div",{className:"text-red-500 text-sm",children:d.cnpj})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"shortname",children:"Nome curto"}),e.jsx(i,{type:"text",id:"shortname",value:a.shortname,onChange:t=>r("shortname",t.target.value)})]}),e.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[e.jsx(l,{htmlFor:"companyname",children:"Razão social"}),e.jsx(i,{type:"text",id:"companyname",value:a.companyname,onChange:t=>r("companyname",t.target.value)}),d.companyname&&e.jsx("div",{className:"text-red-500 text-sm",children:d.companyname})]})]}),e.jsxs("div",{className:"grid md:grid-cols-6 gap-4 mt-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"zip_code",children:"CEP"}),e.jsx(i,{type:"text",id:"zip_code",value:_(a.zip_code),onChange:t=>r("zip_code",t.target.value),onBlur:t=>x(t.target.value),maxLength:9})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"state",children:"UF"}),e.jsx(i,{type:"text",id:"state",value:a.state,onChange:t=>r("state",t.target.value)}),d.state&&e.jsx("div",{children:d.state})]}),e.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[e.jsx(l,{htmlFor:"city",children:"Cidade"}),e.jsx(i,{type:"text",id:"city",value:a.city,onChange:t=>r("city",t.target.value)})]}),e.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[e.jsx(l,{htmlFor:"district",children:"Bairro"}),e.jsx(i,{type:"text",id:"district",value:a.district,onChange:t=>r("district",t.target.value)})]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"md:col-span-2 grid gap-2",children:[e.jsx(l,{htmlFor:"street",children:"Logradouro"}),e.jsx(i,{type:"text",id:"street",value:a.street,onChange:t=>r("street",t.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"number",children:"Número"}),e.jsx(i,{type:"text",id:"number",value:a.number,onChange:t=>r("number",t.target.value)})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"complement",children:"Complemento"}),e.jsx(i,{type:"text",id:"complement",value:a.complement,onChange:t=>r("complement",t.target.value)})]})]}),e.jsxs("div",{className:"grid md:grid-cols-6 gap-4 mt-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"telephone",children:"Telefone"}),e.jsx(i,{type:"text",id:"telephone",value:z(a.telephone),onChange:t=>r("telephone",t.target.value),maxLength:15}),d.telephone&&e.jsx("div",{className:"text-red-500 text-sm",children:d.telephone})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"whatsapp",children:"Whatsapp"}),e.jsx(i,{type:"text",id:"whatsapp",value:a.whatsapp,onChange:t=>r("whatsapp",t.target.value)})]}),e.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[e.jsx(l,{htmlFor:"site",children:"Site"}),e.jsx(i,{type:"text",id:"site",value:a.site,onChange:t=>r("site",t.target.value)})]}),e.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[e.jsx(l,{htmlFor:"email",children:"E-mail"}),e.jsx(i,{type:"text",id:"email",value:a.email,onChange:t=>r("email",t.target.value)})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(C,{type:"submit",disabled:m,children:[e.jsx(v,{}),"Salvar"]})})]})]})})]})}export{X as default};
